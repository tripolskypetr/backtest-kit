<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1064.5703125 2636" style="max-width: 1064.57px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="Output" class="cluster"><rect height="400" width="500.1171875" y="2228" x="72.94140625" style=""/><g transform="translate(298.0625, 2228)" class="cluster-label"><foreignObject height="24" width="49.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Output</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph5" class="cluster"><rect height="304" width="640" y="1874" x="8" style=""/><g transform="translate(252.625, 1874)" class="cluster-label"><foreignObject height="24" width="150.75"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Portfolio Aggregation</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph4" class="cluster"><rect height="520" width="348.703125" y="1304" x="146.7265625" style=""/><g transform="translate(245.7421875, 1304)" class="cluster-label"><foreignObject height="24" width="150.671875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Statistics Calculation</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph3" class="cluster"><rect height="304" width="330" y="950" x="156.078125" style=""/><g transform="translate(240.6328125, 950)" class="cluster-label"><foreignObject height="24" width="160.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>HeatmapStorage State</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph2" class="cluster"><rect height="433" width="334.578125" y="467" x="153.7890625" style=""/><g transform="translate(221.078125, 467)" class="cluster-label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>HeatMarkdownService Processing</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="305" width="548.203125" y="314" x="508.3671875" style=""/><g transform="translate(729.3203125, 314)" class="cluster-label"><foreignObject height="24" width="106.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Event Emission</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="256" width="545.56640625" y="8" x="509.81640625" style=""/><g transform="translate(719.169921875, 8)" class="cluster-label"><foreignObject height="24" width="126.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Signal Generation</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcSymbol_CalcMetrics_0" d="M321.078,1431L321.078,1435.167C321.078,1439.333,321.078,1447.667,321.078,1455.333C321.078,1463,321.078,1470,321.078,1473.5L321.078,1477"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_AggregateLoop_SumPortfolio_0" d="M244.191,1953L232.326,1957.167C220.461,1961.333,196.73,1969.667,184.865,1979.333C173,1989,173,2000,173,2005.5L173,2011"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_AggregateLoop_CalcPortfolioSharpe_0" d="M405.153,1953L418.127,1957.167C431.102,1961.333,457.051,1969.667,470.025,1977.333C483,1985,483,1992,483,1995.5L483,1999"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_BacktestRun_ClientStrategy_0" d="M655.48,111L655.48,115.167C655.48,119.333,655.48,127.667,656.404,135.355C657.328,143.044,659.175,150.087,660.099,153.609L661.022,157.131"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_LiveRun_ClientStrategy_0" d="M909.457,111L909.457,115.167C909.457,119.333,909.457,127.667,890.502,136.948C871.548,146.229,833.638,156.458,814.684,161.572L795.729,166.687"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientStrategy_signalEmitter_0" d="M672.266,239L672.266,243.167C672.266,247.333,672.266,255.667,672.266,264C672.266,272.333,672.266,280.667,672.266,289C672.266,297.333,672.266,305.667,672.266,313.333C672.266,321,672.266,328,672.266,331.5L672.266,335"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_signalEmitter_signalBacktestEmitter_0" d="M672.266,417L672.266,421.167C672.266,425.333,672.266,433.667,672.266,442C672.266,450.333,672.266,458.667,672.266,470.333C672.266,482,672.266,497,672.266,504.5L672.266,512"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_signalEmitter_signalLiveEmitter_0" d="M794.242,409.192L815.625,414.66C837.008,420.128,879.773,431.064,901.156,440.699C922.539,450.333,922.539,458.667,922.539,470.333C922.539,482,922.539,497,922.539,504.5L922.539,512"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_signalEmitter_TickHandler_0" d="M624.437,417L619.327,421.167C614.217,425.333,603.997,433.667,598.887,442C593.777,450.333,593.777,458.667,570.636,469.283C547.495,479.899,501.213,492.797,478.072,499.246L454.931,505.696"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_TickHandler_GetStorage_0" d="M321.078,594L321.078,598.167C321.078,602.333,321.078,610.667,321.078,619C321.078,627.333,321.078,635.667,321.078,643.333C321.078,651,321.078,658,321.078,661.5L321.078,665"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_GetStorage_AddSignal_0" d="M321.078,747L321.078,751.167C321.078,755.333,321.078,763.667,321.078,771.333C321.078,779,321.078,786,321.078,789.5L321.078,793"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_AddSignal_SymbolDataMap_0" d="M321.078,875L321.078,879.167C321.078,883.333,321.078,891.667,321.078,900C321.078,908.333,321.078,916.667,321.078,925C321.078,933.333,321.078,941.667,321.078,949.333C321.078,957,321.078,964,321.078,967.5L321.078,971"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_SymbolDataMap_MaxEventsCheck_0" d="M321.078,1101L321.078,1105.167C321.078,1109.333,321.078,1117.667,321.078,1125.333C321.078,1133,321.078,1140,321.078,1143.5L321.078,1147"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_MaxEventsCheck_CalcSymbol_0" d="M321.078,1229L321.078,1233.167C321.078,1237.333,321.078,1245.667,321.078,1254C321.078,1262.333,321.078,1270.667,321.078,1279C321.078,1287.333,321.078,1295.667,321.078,1303.333C321.078,1311,321.078,1318,321.078,1321.5L321.078,1325"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcMetrics_AggregateLoop_0" d="M321.078,1799L321.078,1803.167C321.078,1807.333,321.078,1815.667,321.078,1824C321.078,1832.333,321.078,1840.667,321.078,1849C321.078,1857.333,321.078,1865.667,321.078,1873.333C321.078,1881,321.078,1888,321.078,1891.5L321.078,1895"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_SumPortfolio_HeatStats_0" d="M173,2141L173,2147.167C173,2153.333,173,2165.667,173,2176C173,2186.333,173,2194.667,173,2203C173,2211.333,173,2219.667,177.977,2227.598C182.954,2235.529,192.909,2243.058,197.886,2246.823L202.863,2250.587"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcPortfolioSharpe_HeatStats_0" d="M483,2153L483,2157.167C483,2161.333,483,2169.667,483,2178C483,2186.333,483,2194.667,483,2203C483,2211.333,483,2219.667,476.307,2228.463C469.615,2237.258,456.23,2246.517,449.537,2251.146L442.844,2255.775"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_HeatStats_MarkdownReport_0" d="M321.078,2427L321.078,2431.167C321.078,2435.333,321.078,2443.667,321.078,2451.333C321.078,2459,321.078,2466,321.078,2469.5L321.078,2473"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(655.48046875, 72)" id="flowchart-BacktestRun-0" class="node default"><rect height="78" width="203.453125" y="-39" x="-101.7265625" style="" class="basic label-container"/><g transform="translate(-71.7265625, -24)" style="" class="label"><rect/><foreignObject height="48" width="143.453125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Backtest.run()<br />Historical execution</p></span></div></foreignObject></g></g><g transform="translate(909.45703125, 72)" id="flowchart-LiveRun-1" class="node default"><rect height="78" width="204.5" y="-39" x="-102.25" style="" class="basic label-container"/><g transform="translate(-72.25, -24)" style="" class="label"><rect/><foreignObject height="48" width="144.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Live.run()<br />Real-time execution</p></span></div></foreignObject></g></g><g transform="translate(672.265625, 200)" id="flowchart-ClientStrategy-2" class="node default"><rect height="78" width="239.203125" y="-39" x="-119.6015625" style="" class="basic label-container"/><g transform="translate(-89.6015625, -24)" style="" class="label"><rect/><foreignObject height="48" width="179.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientStrategy.backtest()<br />Signal closure</p></span></div></foreignObject></g></g><g transform="translate(672.265625, 378)" id="flowchart-signalEmitter-3" class="node default"><rect height="78" width="243.953125" y="-39" x="-121.9765625" style="" class="basic label-container"/><g transform="translate(-91.9765625, -24)" style="" class="label"><rect/><foreignObject height="48" width="183.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>signalEmitter.next()<br />IStrategyTickResultClosed</p></span></div></foreignObject></g></g><g transform="translate(672.265625, 543)" id="flowchart-signalBacktestEmitter-4" class="node default"><rect height="54" width="216.328125" y="-27" x="-108.1640625" style="" class="basic label-container"/><g transform="translate(-78.1640625, -12)" style="" class="label"><rect/><foreignObject height="24" width="156.328125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>signalBacktestEmitter</p></span></div></foreignObject></g></g><g transform="translate(922.5390625, 543)" id="flowchart-signalLiveEmitter-5" class="node default"><rect height="54" width="184.21875" y="-27" x="-92.109375" style="" class="basic label-container"/><g transform="translate(-62.109375, -12)" style="" class="label"><rect/><foreignObject height="24" width="124.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>signalLiveEmitter</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 543)" id="flowchart-TickHandler-6" class="node default"><rect height="102" width="260" y="-51" x="-130" style="fill:#e1f5ff !important" class="basic label-container"/><g transform="translate(-100, -36)" style="" class="label"><rect/><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>tick(data: IStrategyTickResult)<br />Filter action === 'closed'</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 708)" id="flowchart-GetStorage-7" class="node default"><rect height="78" width="247.921875" y="-39" x="-123.9609375" style="" class="basic label-container"/><g transform="translate(-93.9609375, -24)" style="" class="label"><rect/><foreignObject height="48" width="187.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>getStorage(strategyName)<br />Memoized per-strategy</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 836)" id="flowchart-AddSignal-8" class="node default"><rect height="78" width="264.578125" y="-39" x="-132.2890625" style="" class="basic label-container"/><g transform="translate(-102.2890625, -24)" style="" class="label"><rect/><foreignObject height="48" width="204.578125"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>HeatmapStorage.addSignal()<br />Group by symbol</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 1038)" id="flowchart-SymbolDataMap-9" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>symbolData: Map&lt;symbol, signals[]&gt;<br />BTCUSDT: [sig1, sig2, ...]<br />ETHUSDT: [sig3, sig4, ...]</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 1190)" id="flowchart-MaxEventsCheck-10" class="node default"><rect height="78" width="254.234375" y="-39" x="-127.1171875" style="" class="basic label-container"/><g transform="translate(-97.1171875, -24)" style="" class="label"><rect/><foreignObject height="48" width="194.234375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>MAX_EVENTS = 250<br />Trim old signals per symbol</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 1380)" id="flowchart-CalcSymbol-11" class="node default"><rect height="102" width="278.703125" y="-51" x="-139.3515625" style="" class="basic label-container"/><g transform="translate(-109.3515625, -36)" style="" class="label"><rect/><foreignObject height="72" width="218.703125"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>calculateSymbolStats(symbol, signals)<br />Per-symbol metrics</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 1640)" id="flowchart-CalcMetrics-12" class="node default"><rect height="318" width="260" y="-159" x="-130" style="fill:#fff4e1 !important" class="basic label-container"/><g transform="translate(-100, -144)" style="" class="label"><rect/><foreignObject height="288" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Calculate:<br />- totalPnl = sum(pnl)<br />- winRate = wins/total<br />- sharpeRatio = avgPnl/stdDev<br />- profitFactor = sumWins/sumLosses<br />- maxDrawdown = max decline<br />- expectancy = winRate×avgWin - lossRate×avgLoss</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 1926)" id="flowchart-AggregateLoop-15" class="node default"><rect height="54" width="214.203125" y="-27" x="-107.1015625" style="" class="basic label-container"/><g transform="translate(-77.1015625, -12)" style="" class="label"><rect/><foreignObject height="24" width="154.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Loop over all symbols</p></span></div></foreignObject></g></g><g transform="translate(173, 2078)" id="flowchart-SumPortfolio-16" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>portfolioTotalPnl = Σ(symbol.totalPnl)<br />portfolioTotalTrades = Σ(symbol.totalTrades)</p></span></div></foreignObject></g></g><g transform="translate(483, 2078)" id="flowchart-CalcPortfolioSharpe-17" class="node default"><rect height="150" width="260" y="-75" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -60)" style="" class="label"><rect/><foreignObject height="120" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>portfolioSharpeRatio:<br />1. Collect all PNL values<br />2. Calculate portfolio stdDev<br />3. Sharpe = avgPnl / stdDev</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 2340)" id="flowchart-HeatStats-22" class="node default"><rect height="174" width="236.953125" y="-87" x="-118.4765625" style="fill:#e8f5e9 !important" class="basic label-container"/><g transform="translate(-88.4765625, -72)" style="" class="label"><rect/><foreignObject height="144" width="176.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>IHeatmapStatistics<br />symbols: IHeatmapRow[]<br />totalSymbols<br />portfolioTotalPnl<br />portfolioSharpeRatio<br />portfolioTotalTrades</p></span></div></foreignObject></g></g><g transform="translate(321.078125, 2540)" id="flowchart-MarkdownReport-23" class="node default"><rect height="126" width="250.234375" y="-63" x="-125.1171875" style="" class="basic label-container"/><g transform="translate(-95.1171875, -48)" style="" class="label"><rect/><foreignObject height="96" width="190.234375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Markdown Report<br />- Symbol comparison table<br />- Portfolio summary<br />- Sorted by totalPnl</p></span></div></foreignObject></g></g></g></g></g></svg>