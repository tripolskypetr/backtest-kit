<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 2149.61328125 1442" style="max-width: 2149.61px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph6" class="cluster"><rect height="176" width="364" y="8" x="815.390625" style=""/><g transform="translate(925.5703125, 8)" class="cluster-label"><foreignObject height="24" width="143.640625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Strategy Integration</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph5" class="cluster"><rect height="176" width="1289.328125" y="484" x="192.00390625" style=""/><g transform="translate(759.77734375, 484)" class="cluster-label"><foreignObject height="24" width="153.78125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Milestone Calculation</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph4" class="cluster"><rect height="176" width="1077.9375" y="1032" x="8" style=""/><g transform="translate(477.1015625, 1032)" class="cluster-label"><foreignObject height="24" width="139.734375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Public API Listeners</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph3" class="cluster"><rect height="224" width="968.7890625" y="734" x="51.73828125" style=""/><g transform="translate(482.984375, 734)" class="cluster-label"><foreignObject height="24" width="106.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Event Emission</p></span></div></foreignObject></g></g><g data-look="classic" id="Persistence" class="cluster"><rect height="152" width="345.640625" y="1282" x="1795.97265625" style=""/><g transform="translate(1928.24609375, 1282)" class="cluster-label"><foreignObject height="24" width="81.09375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Persistence</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="700" width="670.03515625" y="734" x="1105.9375" style=""/><g transform="translate(1374.408203125, 734)" class="cluster-label"><foreignObject height="24" width="133.09375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>State Management</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="152" width="1014.15625" y="258" x="540.08984375" style=""/><g transform="translate(966.51171875, 258)" class="cluster-label"><foreignObject height="24" width="161.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Client Implementation</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientStrategy_ClientPartial_0" d="M900.561,159L893.033,163.167C885.504,167.333,870.447,175.667,862.919,186C855.391,196.333,855.391,208.667,855.391,221C855.391,233.333,855.391,245.667,862.843,255.693C870.295,265.72,885.199,273.44,892.651,277.3L900.103,281.16"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientStrategy_ClientPartial_2" d="M1014.391,159L1014.391,163.167C1014.391,167.333,1014.391,175.667,1014.391,186C1014.391,196.333,1014.391,208.667,1014.391,221C1014.391,233.333,1014.391,245.667,1013.824,255.342C1013.257,265.017,1012.123,272.034,1011.557,275.543L1010.99,279.051"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientPartial_CalcProfit_0" d="M885.637,359.844L847.962,368.203C810.288,376.563,734.939,393.281,697.264,407.807C659.59,422.333,659.59,434.667,659.59,447C659.59,459.333,659.59,471.667,659.59,481.333C659.59,491,659.59,498,659.59,501.5L659.59,505"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientPartial_CalcLoss_0" d="M1055.462,385L1059.821,389.167C1064.179,393.333,1072.896,401.667,1077.255,412C1081.613,422.333,1081.613,434.667,1081.613,447C1081.613,459.333,1081.613,471.667,1081.613,481.333C1081.613,491,1081.613,498,1081.613,501.5L1081.613,505"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcProfit_PartialState_0" d="M789.59,590.417L871.448,602.015C953.306,613.612,1117.022,636.806,1198.88,654.57C1280.738,672.333,1280.738,684.667,1280.738,697C1280.738,709.333,1280.738,721.667,1291.543,733.935C1302.347,746.204,1323.955,758.408,1334.76,764.51L1345.564,770.612"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcLoss_PartialState_0" d="M1211.613,602.128L1253.233,611.773C1294.853,621.418,1378.092,640.709,1419.712,656.521C1461.332,672.333,1461.332,684.667,1461.332,697C1461.332,709.333,1461.332,721.667,1461.887,731.342C1462.442,741.016,1463.552,748.033,1464.106,751.541L1464.661,755.049"/><path style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="PartialState-cyclic-special-1" d="M1349.047,896.102L1322.279,906.418C1295.51,916.734,1241.974,937.367,1215.206,953.85C1188.438,970.333,1188.438,982.667,1188.438,995C1188.438,1007.333,1188.438,1019.667,1188.438,1040.492C1188.438,1061.317,1188.438,1090.633,1188.438,1105.292L1188.438,1119.95"/><path style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="PartialState-cyclic-special-mid" d="M1188.438,1120.05L1188.438,1134.708C1188.438,1149.367,1188.438,1178.683,1188.438,1199.508C1188.438,1220.333,1188.438,1232.667,1188.438,1245C1188.438,1257.333,1188.438,1269.667,1193.21,1288.492C1197.982,1307.317,1207.526,1332.633,1212.299,1345.292L1217.071,1357.95"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="PartialState-cyclic-special-2" d="M1217.109,1357.95L1221.881,1345.292C1226.653,1332.633,1236.198,1307.317,1240.97,1288.492C1245.742,1269.667,1245.742,1257.333,1245.742,1245C1245.742,1232.667,1245.742,1220.333,1245.742,1199.5C1245.742,1178.667,1245.742,1149.333,1245.742,1120C1245.742,1090.667,1245.742,1061.333,1245.742,1040.5C1245.742,1019.667,1245.742,1007.333,1245.742,995C1245.742,982.667,1245.742,970.333,1262.359,956.19C1278.975,942.046,1312.208,926.093,1328.824,918.116L1345.441,910.139"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PartialState_PartialData_0" d="M1479.602,933L1479.629,937.167C1479.655,941.333,1479.709,949.667,1479.735,960C1479.762,970.333,1479.762,982.667,1479.762,995C1479.762,1007.333,1479.762,1019.667,1479.762,1029.333C1479.762,1039,1479.762,1046,1479.762,1049.5L1479.762,1053"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PartialData_PersistPartialAdapter_0" d="M1479.762,1183L1479.762,1187.167C1479.762,1191.333,1479.762,1199.667,1479.762,1210C1479.762,1220.333,1479.762,1232.667,1479.762,1245C1479.762,1257.333,1479.762,1269.667,1537.638,1284.828C1595.515,1299.989,1711.267,1317.978,1769.144,1326.973L1827.02,1335.967"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcProfit_PartialProfitSubject_0" d="M529.59,603.335L490.409,612.779C451.228,622.223,372.866,641.112,333.685,656.723C294.504,672.333,294.504,684.667,294.504,697C294.504,709.333,294.504,721.667,294.504,737.333C294.504,753,294.504,772,294.504,781.5L294.504,791"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcLoss_PartialLossSubject_0" d="M951.613,616.257L930.198,623.547C908.783,630.838,865.952,645.419,844.536,658.876C823.121,672.333,823.121,684.667,823.121,697C823.121,709.333,823.121,721.667,823.121,737.333C823.121,753,823.121,772,823.121,781.5L823.121,791"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PartialProfitSubject_ListenPartialProfit_0" d="M226.814,897L213.32,907.167C199.827,917.333,172.839,937.667,159.345,954C145.852,970.333,145.852,982.667,145.852,995C145.852,1007.333,145.852,1019.667,145.852,1031.333C145.852,1043,145.852,1054,145.852,1059.5L145.852,1065"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PartialProfitSubject_ListenPartialProfitOnce_0" d="M349.721,897L360.729,907.167C371.736,917.333,393.751,937.667,404.758,954C415.766,970.333,415.766,982.667,415.766,995C415.766,1007.333,415.766,1019.667,415.766,1031.333C415.766,1043,415.766,1054,415.766,1059.5L415.766,1065"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PartialLossSubject_ListenPartialLoss_0" d="M757.904,897L744.903,907.167C731.902,917.333,705.9,937.667,692.899,954C679.898,970.333,679.898,982.667,679.898,995C679.898,1007.333,679.898,1019.667,679.898,1031.333C679.898,1043,679.898,1054,679.898,1059.5L679.898,1065"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PartialLossSubject_ListenPartialLossOnce_0" d="M875.866,897L886.381,907.167C896.895,917.333,917.924,937.667,928.439,954C938.953,970.333,938.953,982.667,938.953,995C938.953,1007.333,938.953,1019.667,938.953,1031.333C938.953,1043,938.953,1054,938.953,1059.5L938.953,1065"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientStrategy_ClientPartial_3" d="M1114.419,159L1121.035,163.167C1127.651,167.333,1140.882,175.667,1147.498,186C1154.113,196.333,1154.113,208.667,1154.113,221C1154.113,233.333,1154.113,245.667,1146.376,255.702C1138.639,265.737,1123.165,273.474,1115.428,277.343L1107.691,281.211"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientPartial_PartialState_0" d="M1118.59,350.635L1187.866,360.529C1257.142,370.424,1395.694,390.212,1464.97,406.273C1534.246,422.333,1534.246,434.667,1534.246,447C1534.246,459.333,1534.246,471.667,1534.246,492.5C1534.246,513.333,1534.246,542.667,1534.246,572C1534.246,601.333,1534.246,630.667,1534.246,651.5C1534.246,672.333,1534.246,684.667,1534.246,697C1534.246,709.333,1534.246,721.667,1532.487,731.402C1530.728,741.137,1527.211,748.275,1525.452,751.843L1523.693,755.412"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PartialState_PersistPartialAdapter_0" d="M1609.047,912.348L1623.955,919.957C1638.863,927.565,1668.68,942.783,1683.588,956.558C1698.496,970.333,1698.496,982.667,1698.496,995C1698.496,1007.333,1698.496,1019.667,1698.496,1040.5C1698.496,1061.333,1698.496,1090.667,1698.496,1120C1698.496,1149.333,1698.496,1178.667,1698.496,1199.5C1698.496,1220.333,1698.496,1232.667,1698.496,1245C1698.496,1257.333,1698.496,1269.667,1719.934,1281.861C1741.371,1294.055,1784.247,1306.111,1805.684,1312.138L1827.122,1318.166"/></g><g class="edgeLabels"><g transform="translate(855.390625, 221)" class="edgeLabel"><g transform="translate(-69.5, -12)" class="label"><foreignObject height="24" width="139"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>revenuePercent &gt; 0</p></span></div></foreignObject></g></g><g transform="translate(1014.390625, 221)" class="edgeLabel"><g transform="translate(-69.5, -12)" class="label"><foreignObject height="24" width="139"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>revenuePercent &lt; 0</p></span></div></foreignObject></g></g><g transform="translate(659.58984375, 447)" class="edgeLabel"><g transform="translate(-20.2734375, -12)" class="label"><foreignObject height="24" width="40.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>profit</p></span></div></foreignObject></g></g><g transform="translate(1081.61328125, 447)" class="edgeLabel"><g transform="translate(-13.1328125, -12)" class="label"><foreignObject height="24" width="26.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>loss</p></span></div></foreignObject></g></g><g transform="translate(1280.73828125, 697)" class="edgeLabel"><g transform="translate(-52.9140625, -12)" class="label"><foreignObject height="24" width="105.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>New milestone</p></span></div></foreignObject></g></g><g transform="translate(1461.33203125, 697)" class="edgeLabel"><g transform="translate(-52.9140625, -12)" class="label"><foreignObject height="24" width="105.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>New milestone</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1188.4375, 1245)" class="edgeLabel"><g transform="translate(-37.3046875, -12)" class="label"><foreignObject height="24" width="74.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Add to Set</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1479.76171875, 995)" class="edgeLabel"><g transform="translate(-30.609375, -12)" class="label"><foreignObject height="24" width="61.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Serialize</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(294.50390625, 697)" class="edgeLabel"><g transform="translate(-38.9765625, -12)" class="label"><foreignObject height="24" width="77.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Emit event</p></span></div></foreignObject></g></g><g transform="translate(823.12109375, 697)" class="edgeLabel"><g transform="translate(-38.9765625, -12)" class="label"><foreignObject height="24" width="77.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Emit event</p></span></div></foreignObject></g></g><g transform="translate(145.8515625, 995)" class="edgeLabel"><g transform="translate(-33.4765625, -12)" class="label"><foreignObject height="24" width="66.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>subscribe</p></span></div></foreignObject></g></g><g transform="translate(415.765625, 995)" class="edgeLabel"><g transform="translate(-44.25, -12)" class="label"><foreignObject height="24" width="88.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>filter + once</p></span></div></foreignObject></g></g><g transform="translate(679.8984375, 995)" class="edgeLabel"><g transform="translate(-33.4765625, -12)" class="label"><foreignObject height="24" width="66.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>subscribe</p></span></div></foreignObject></g></g><g transform="translate(938.953125, 995)" class="edgeLabel"><g transform="translate(-44.25, -12)" class="label"><foreignObject height="24" width="88.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>filter + once</p></span></div></foreignObject></g></g><g transform="translate(1154.11328125, 221)" class="edgeLabel"><g transform="translate(-44.9453125, -12)" class="label"><foreignObject height="24" width="89.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Signal closes</p></span></div></foreignObject></g></g><g transform="translate(1534.24609375, 572)" class="edgeLabel"><g transform="translate(-18, -12)" class="label"><foreignObject height="24" width="36"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>clear</p></span></div></foreignObject></g></g><g transform="translate(1698.49609375, 1120)" class="edgeLabel"><g transform="translate(-57.4765625, -12)" class="label"><foreignObject height="24" width="114.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Remove signalId</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(1002.11328125, 334)" id="flowchart-ClientPartial-0" class="node default"><rect height="102" width="232.953125" y="-51" x="-116.4765625" style="" class="basic label-container"/><g transform="translate(-86.4765625, -36)" style="" class="label"><rect/><foreignObject height="72" width="172.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientPartial<br />Milestone tracking logic<br />Set-based deduplication</p></span></div></foreignObject></g></g><g transform="translate(1479.046875, 846)" id="flowchart-PartialState-1" class="node default"><rect height="174" width="260" y="-87" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -72)" style="" class="label"><rect/><foreignObject height="144" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>IPartialState (in-memory)<br />Map&lt;signalId, state&gt;<br />profitLevels: Set&lt;PartialLevel&gt;<br />lossLevels: Set&lt;PartialLevel&gt;</p></span></div></foreignObject></g></g><g transform="translate(1479.76171875, 1120)" id="flowchart-PartialData-2" class="node default"><rect height="126" width="252.515625" y="-63" x="-126.2578125" style="" class="basic label-container"/><g transform="translate(-96.2578125, -48)" style="" class="label"><rect/><foreignObject height="96" width="192.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>IPartialData (serialized)<br />profitLevels: PartialLevel[]<br />lossLevels: PartialLevel[]<br />JSON persistence</p></span></div></foreignObject></g></g><g transform="translate(1968.79296875, 1358)" id="flowchart-PersistPartialAdapter-3" class="node default"><rect height="102" width="275.640625" y="-51" x="-137.8203125" style="" class="basic label-container"/><g transform="translate(-107.8203125, -36)" style="" class="label"><rect/><foreignObject height="72" width="215.640625"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PersistPartialAdapter<br />./dump/partial_{symbol}.json<br />Atomic writes</p></span></div></foreignObject></g></g><g transform="translate(294.50390625, 846)" id="flowchart-PartialProfitSubject-4" class="node default"><rect height="102" width="226.453125" y="-51" x="-113.2265625" style="" class="basic label-container"/><g transform="translate(-83.2265625, -36)" style="" class="label"><rect/><foreignObject height="72" width="166.453125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>partialProfitSubject<br />Profit milestone events<br />PartialProfitContract</p></span></div></foreignObject></g></g><g transform="translate(823.12109375, 846)" id="flowchart-PartialLossSubject-5" class="node default"><rect height="102" width="216.296875" y="-51" x="-108.1484375" style="" class="basic label-container"/><g transform="translate(-78.1484375, -36)" style="" class="label"><rect/><foreignObject height="72" width="156.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>partialLossSubject<br />Loss milestone events<br />PartialLossContract</p></span></div></foreignObject></g></g><g transform="translate(145.8515625, 1120)" id="flowchart-ListenPartialProfit-6" class="node default"><rect height="102" width="205.703125" y="-51" x="-102.8515625" style="" class="basic label-container"/><g transform="translate(-72.8515625, -36)" style="" class="label"><rect/><foreignObject height="72" width="145.703125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>listenPartialProfit()<br />Queued processing<br />All profit milestones</p></span></div></foreignObject></g></g><g transform="translate(415.765625, 1120)" id="flowchart-ListenPartialProfitOnce-7" class="node default"><rect height="102" width="234.125" y="-51" x="-117.0625" style="" class="basic label-container"/><g transform="translate(-87.0625, -36)" style="" class="label"><rect/><foreignObject height="72" width="174.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>listenPartialProfitOnce()<br />Filter + once<br />Conditional</p></span></div></foreignObject></g></g><g transform="translate(679.8984375, 1120)" id="flowchart-ListenPartialLoss-8" class="node default"><rect height="102" width="194.140625" y="-51" x="-97.0703125" style="" class="basic label-container"/><g transform="translate(-67.0703125, -36)" style="" class="label"><rect/><foreignObject height="72" width="134.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>listenPartialLoss()<br />Queued processing<br />All loss milestones</p></span></div></foreignObject></g></g><g transform="translate(938.953125, 1120)" id="flowchart-ListenPartialLossOnce-9" class="node default"><rect height="102" width="223.96875" y="-51" x="-111.984375" style="" class="basic label-container"/><g transform="translate(-81.984375, -36)" style="" class="label"><rect/><foreignObject height="72" width="163.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>listenPartialLossOnce()<br />Filter + once<br />Conditional</p></span></div></foreignObject></g></g><g transform="translate(659.58984375, 572)" id="flowchart-CalcProfit-10" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Calculate revenuePercent<br />Compare to PartialLevel<br />10, 20, 30, 40, 50, 60, 70, 80, 90, 100</p></span></div></foreignObject></g></g><g transform="translate(1081.61328125, 572)" id="flowchart-CalcLoss-11" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Calculate lossPercent<br />Compare to PartialLevel<br />10, 20, 30, 40, 50, 60, 70, 80, 90, 100</p></span></div></foreignObject></g></g><g transform="translate(1014.390625, 96)" id="flowchart-ClientStrategy-12" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientStrategy.tick()<br />Monitor active signal<br />Call partial.profit() or partial.loss()</p></span></div></foreignObject></g></g><g transform="translate(1188.4375, 1120)" id="PartialState---PartialState---1" class="label edgeLabel"><rect height="0.1" width="0.1"/><g transform="translate(0, 0)" style="" class="label"><rect/><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 10px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g><g transform="translate(1217.08984375, 1358)" id="PartialState---PartialState---2" class="label edgeLabel"><rect height="0.1" width="0.1"/><g transform="translate(0, 0)" style="" class="label"><rect/><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 10px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g></g></g></g></svg>