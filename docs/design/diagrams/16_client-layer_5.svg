<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1498.859375 464" style="max-width: 1498.86px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph3" class="cluster"><rect height="152" width="618.9296875" y="304" x="170.04296875" style=""/><g transform="translate(426.359375, 304)" class="cluster-label"><foreignObject height="24" width="106.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Event Emission</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="152" width="436.12109375" y="304" x="808.97265625" style=""/><g transform="translate(934.353515625, 304)" class="cluster-label"><foreignObject height="24" width="185.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Internal State (Per Signal)</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="222" width="1099.9765625" y="8" x="378" style=""/><g transform="translate(851.26171875, 8)" class="cluster-label"><foreignObject height="24" width="153.453125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientPartial Methods</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PROFIT_STATE_0" d="M514.847,194L509.122,200C503.398,206,491.949,218,486.224,230.167C480.5,242.333,480.5,254.667,548.937,267C617.374,279.333,754.247,291.667,825.932,301.501C897.616,311.335,904.111,318.67,907.358,322.338L910.605,326.005"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PROFIT_PROFIT_EVENT_0" d="M589.683,194L589.946,200C590.208,206,590.733,218,590.995,230.167C591.258,242.333,591.258,254.667,547.808,267C504.358,279.333,417.458,291.667,374.008,303.333C330.559,315,330.559,326,330.559,331.5L330.559,337"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PROFIT_STATE_2" d="M666.742,194L673.169,200C679.596,206,692.45,218,698.878,230.167C705.305,242.333,705.305,254.667,757.758,267C810.211,279.333,915.117,291.667,964.612,301.482C1014.108,311.298,1008.192,318.595,1005.234,322.244L1002.276,325.893"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_LOSS_STATE_0" d="M828.917,182L820.348,190C811.778,198,794.639,214,786.07,228.167C777.5,242.333,777.5,254.667,825.604,267C873.707,279.333,969.914,291.667,1012.657,301.616C1055.401,311.565,1044.68,319.129,1039.32,322.912L1033.959,326.694"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_LOSS_LOSS_EVENT_0" d="M887.793,182L886.7,190C885.607,198,883.421,214,882.328,228.167C881.234,242.333,881.234,254.667,839.951,267C798.668,279.333,716.102,291.667,674.818,303.333C633.535,315,633.535,326,633.535,331.5L633.535,337"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_LOSS_STATE_2" d="M1019.332,182L1034.942,190C1050.552,198,1081.772,214,1097.382,228.167C1112.992,242.333,1112.992,254.667,1112.992,267C1112.992,279.333,1112.992,291.667,1102.71,302.889C1092.428,314.11,1071.864,324.221,1061.582,329.276L1051.301,334.331"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CLEAR_STATE_0" d="M1255.361,170L1244.064,180C1232.767,190,1210.172,210,1198.875,226.167C1187.578,242.333,1187.578,254.667,1187.578,267C1187.578,279.333,1187.578,291.667,1164.9,305.354C1142.221,319.042,1096.864,334.084,1074.186,341.605L1051.508,349.126"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CLEAR_PERSIST_0" d="M1346.287,170L1352.819,180C1359.35,190,1372.413,210,1378.945,226.167C1385.477,242.333,1385.477,254.667,1385.477,267C1385.477,279.333,1385.477,291.667,1385.477,305.333C1385.477,319,1385.477,334,1385.477,341.5L1385.477,349"/></g><g class="edgeLabels"><g transform="translate(480.5, 267)" class="edgeLabel"><g transform="translate(-23.9296875, -12)" class="label"><foreignObject height="24" width="47.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>checks</p></span></div></foreignObject></g></g><g transform="translate(591.2578125, 267)" class="edgeLabel"><g transform="translate(-59.8046875, -12)" class="label"><foreignObject height="24" width="119.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>emits new levels</p></span></div></foreignObject></g></g><g transform="translate(705.3046875, 267)" class="edgeLabel"><g transform="translate(-28.265625, -12)" class="label"><foreignObject height="24" width="56.53125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>updates</p></span></div></foreignObject></g></g><g transform="translate(777.5, 267)" class="edgeLabel"><g transform="translate(-23.9296875, -12)" class="label"><foreignObject height="24" width="47.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>checks</p></span></div></foreignObject></g></g><g transform="translate(881.234375, 267)" class="edgeLabel"><g transform="translate(-59.8046875, -12)" class="label"><foreignObject height="24" width="119.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>emits new levels</p></span></div></foreignObject></g></g><g transform="translate(1112.9921875, 267)" class="edgeLabel"><g transform="translate(-28.265625, -12)" class="label"><foreignObject height="24" width="56.53125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>updates</p></span></div></foreignObject></g></g><g transform="translate(1187.578125, 267)" class="edgeLabel"><g transform="translate(-26.3203125, -12)" class="label"><foreignObject height="24" width="52.640625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>deletes</p></span></div></foreignObject></g></g><g transform="translate(1385.4765625, 267)" class="edgeLabel"><g transform="translate(-27.1015625, -12)" class="label"><foreignObject height="24" width="54.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>persists</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(0, 25)" class="root"><g class="clusters"><g data-look="classic" id="subGraph2" class="cluster"><rect height="172" width="335" y="8" x="8" style=""/><g transform="translate(127.3828125, 8)" class="cluster-label"><foreignObject height="24" width="96.234375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Partial Levels</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g transform="translate(175.5, 94)" id="flowchart-LEVELS-4" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -36)" style="" class="label"><rect/><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PartialLevel = 10 | 20 | 30 | 40 | 50 | 60 | 70 | 80 | 90 | 100</p></span></div></foreignObject></g></g></g></g><g transform="translate(586.40234375, 119)" id="flowchart-PROFIT-0" class="node default"><rect height="150" width="260" y="-75" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -60)" style="" class="label"><rect/><foreignObject height="120" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>profit(symbol, data, currentPrice, revenuePercent, backtest, when)<br />Track profit milestones</p></span></div></foreignObject></g></g><g transform="translate(896.40234375, 119)" id="flowchart-LOSS-1" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>loss(symbol, data, currentPrice, lossPercent, backtest, when)<br />Track loss milestones</p></span></div></foreignObject></g></g><g transform="translate(1312.9765625, 119)" id="flowchart-CLEAR-2" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -36)" style="" class="label"><rect/><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>clear(symbol, data, priceClose, backtest)<br />Reset on signal close</p></span></div></foreignObject></g></g><g transform="translate(958.4140625, 380)" id="flowchart-STATE-3" class="node default"><rect height="102" width="178.59375" y="-51" x="-89.296875" style="" class="basic label-container"/><g transform="translate(-59.296875, -36)" style="" class="label"><rect/><foreignObject height="72" width="118.59375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Map<br />profitLevels: Set<br />lossLevels: Set</p></span></div></foreignObject></g></g><g transform="translate(330.55859375, 380)" id="flowchart-PROFIT_EVENT-5" class="node default"><rect height="78" width="251.03125" y="-39" x="-125.515625" style="" class="basic label-container"/><g transform="translate(-95.515625, -24)" style="" class="label"><rect/><foreignObject height="48" width="191.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>partialProfitSubject.next()<br />PartialProfitContract</p></span></div></foreignObject></g></g><g transform="translate(633.53515625, 380)" id="flowchart-LOSS_EVENT-6" class="node default"><rect height="78" width="240.875" y="-39" x="-120.4375" style="" class="basic label-container"/><g transform="translate(-90.4375, -24)" style="" class="label"><rect/><foreignObject height="48" width="180.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>partialLossSubject.next()<br />PartialLossContract</p></span></div></foreignObject></g></g><g transform="translate(1385.4765625, 380)" id="flowchart-PERSIST-22" class="node default"><rect height="54" width="210.765625" y="-27" x="-105.3828125" style="" class="basic label-container"/><g transform="translate(-75.3828125, -12)" style="" class="label"><rect/><foreignObject height="24" width="150.765625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PersistPartialAdapter</p></span></div></foreignObject></g></g></g></g></g></svg>