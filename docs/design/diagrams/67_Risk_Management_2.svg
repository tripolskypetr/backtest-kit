<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1239.75390625 851" style="max-width: 1239.75px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph2" class="cluster"><rect height="585" width="585.5546875" y="258" x="8" style=""/><g transform="translate(227.56640625, 258)" class="cluster-label"><foreignObject height="24" width="146.421875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Validation Execution</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="200" width="969.62890625" y="8" x="262.125" style=""/><g transform="translate(693.064453125, 8)" class="cluster-label"><foreignObject height="24" width="107.75"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Public Methods</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="328" width="529.96875" y="258" x="651.890625" style=""/><g transform="translate(829.578125, 258)" class="cluster-label"><foreignObject height="24" width="174.59375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientRisk Internal State</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CHECK_LOAD_0" d="M418.555,159L418.555,167.167C418.555,175.333,418.555,191.667,418.555,204C418.555,216.333,418.555,224.667,418.555,233C418.555,241.333,418.555,249.667,418.555,263.333C418.555,277,418.555,296,418.555,305.5L418.555,315"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_LOAD_RUN_0" d="M418.555,397L418.555,407.167C418.555,417.333,418.555,437.667,418.555,453.333C418.555,469,418.555,480,418.555,485.5L418.555,491"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_RUN_CATCH_0" d="M414.336,549L413.372,555.167C412.409,561.333,410.482,573.667,409.518,584C408.555,594.333,408.555,602.667,408.555,612.333C408.555,622,408.555,633,408.555,638.5L408.555,644"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CATCH_EMIT_0" d="M296.477,701.853L270.637,708.044C244.797,714.236,193.117,726.618,167.277,736.309C141.438,746,141.438,753,141.438,756.5L141.438,760"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CATCH_CALLBACK_0" d="M408.555,702L408.555,708.167C408.555,714.333,408.555,726.667,408.555,736.333C408.555,746,408.555,753,408.555,756.5L408.555,760"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CATCH_RETURN_FALSE_0" d="M443.359,702L451.309,708.167C459.258,714.333,475.156,726.667,505.375,738.328C535.594,749.989,580.132,760.979,602.402,766.474L624.671,771.968"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_RUN_RETURN_TRUE_0" d="M449.141,549L456.126,555.167C463.112,561.333,477.083,573.667,484.069,584C491.055,594.333,491.055,602.667,513.334,613.667C535.613,624.668,580.172,638.335,602.451,645.169L624.731,652.003"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ADD_MAP_0" d="M756.754,171L756.754,177.167C756.754,183.333,756.754,195.667,756.754,206C756.754,216.333,756.754,224.667,756.754,233C756.754,241.333,756.754,249.667,763.064,257.655C769.374,265.643,781.993,273.285,788.303,277.107L794.613,280.928"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_MAP_PERSIST_0" d="M790.534,433L783.237,437.167C775.941,441.333,761.347,449.667,764.826,457.771C768.304,465.876,789.854,473.751,800.629,477.689L811.404,481.627"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_REMOVE_MAP_0" d="M1066.754,183L1066.754,187.167C1066.754,191.333,1066.754,199.667,1066.754,208C1066.754,216.333,1066.754,224.667,1066.754,233C1066.754,241.333,1066.754,249.667,1061.266,257.621C1055.778,265.576,1044.802,273.152,1039.314,276.94L1033.826,280.728"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_MAP_PERSIST_2" d="M1030.534,433L1036.571,437.167C1042.607,441.333,1054.681,449.667,1051.895,457.731C1049.109,465.795,1031.464,473.589,1022.642,477.486L1013.819,481.384"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(921.875, 358)" id="flowchart-MAP-0" class="node default"><rect height="150" width="286.625" y="-75" x="-143.3125" style="fill:#f9f9f9 !important;stroke:#333 !important;stroke-width:2px !important" class="basic label-container"/><g transform="translate(-113.3125, -60)" style="" class="label"><rect/><foreignObject height="120" width="226.625"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>_activePositionsMap<br />Map&lt;string, IRiskActivePosition&gt;<br />Key: symbol:strategyName:riskName</p></span></div></foreignObject></g></g><g transform="translate(921.875, 522)" id="flowchart-PERSIST-1" class="node default"><rect height="78" width="309.9375" y="-39" x="-154.96875" style="fill:#e1ffe1 !important;stroke:#333 !important;stroke-width:2px !important" class="basic label-container"/><g transform="translate(-124.96875, -24)" style="" class="label"><rect/><foreignObject height="48" width="249.9375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PersistRiskAdapter<br />./dump/data/risk/{riskName}.json</p></span></div></foreignObject></g></g><g transform="translate(418.5546875, 108)" id="flowchart-CHECK-2" class="node default"><rect height="102" width="242.859375" y="-51" x="-121.4296875" style="" class="basic label-container"/><g transform="translate(-91.4296875, -36)" style="" class="label"><rect/><foreignObject height="72" width="182.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>checkSignal(params)<br />Validates against all rules<br />Returns boolean</p></span></div></foreignObject></g></g><g transform="translate(756.75390625, 108)" id="flowchart-ADD-3" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>addSignal(symbol, context)<br />Adds to _activePositionsMap<br />Persists to disk</p></span></div></foreignObject></g></g><g transform="translate(1066.75390625, 108)" id="flowchart-REMOVE-4" class="node default"><rect height="150" width="260" y="-75" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -60)" style="" class="label"><rect/><foreignObject height="120" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>removeSignal(symbol, context)<br />Removes from _activePositionsMap<br />Persists to disk</p></span></div></foreignObject></g></g><g transform="translate(418.5546875, 358)" id="flowchart-LOAD-5" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -24)" style="" class="label"><rect/><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Load activePositions from Map</p></span></div></foreignObject></g></g><g transform="translate(418.5546875, 522)" id="flowchart-RUN-6" class="node default"><rect height="54" width="210.671875" y="-27" x="-105.3359375" style="" class="basic label-container"/><g transform="translate(-75.3359375, -12)" style="" class="label"><rect/><foreignObject height="24" width="150.671875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Run validations array</p></span></div></foreignObject></g></g><g transform="translate(408.5546875, 675)" id="flowchart-CATCH-7" class="node default"><rect height="54" width="224.15625" y="-27" x="-112.078125" style="" class="basic label-container"/><g transform="translate(-82.078125, -12)" style="" class="label"><rect/><foreignObject height="24" width="164.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Catch validation errors</p></span></div></foreignObject></g></g><g transform="translate(141.4375, 791)" id="flowchart-EMIT-8" class="node default"><rect height="54" width="196.875" y="-27" x="-98.4375" style="" class="basic label-container"/><g transform="translate(-68.4375, -12)" style="" class="label"><rect/><foreignObject height="24" width="136.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Emit to riskSubject</p></span></div></foreignObject></g></g><g transform="translate(408.5546875, 791)" id="flowchart-CALLBACK-9" class="node default"><rect height="54" width="237.359375" y="-27" x="-118.6796875" style="" class="basic label-container"/><g transform="translate(-88.6796875, -12)" style="" class="label"><rect/><foreignObject height="24" width="177.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Call onRejected callback</p></span></div></foreignObject></g></g><g transform="translate(701.8046875, 791)" id="flowchart-RETURN_FALSE-21" class="node default"><rect height="54" width="146.5" y="-27" x="-73.25" style="" class="basic label-container"/><g transform="translate(-43.25, -12)" style="" class="label"><rect/><foreignObject height="24" width="86.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Return false</p></span></div></foreignObject></g></g><g transform="translate(699.703125, 675)" id="flowchart-RETURN_TRUE-23" class="node default"><rect height="78" width="142.296875" y="-39" x="-71.1484375" style="" class="basic label-container"/><g transform="translate(-41.1484375, -24)" style="" class="label"><rect/><foreignObject height="48" width="82.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Return true<br />(no errors)</p></span></div></foreignObject></g></g></g></g></g></svg>