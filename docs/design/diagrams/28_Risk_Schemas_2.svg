<svg aria-roledescription="stateDiagram" role="graphics-document document" viewBox="0 0 789.98046875 1362" style="max-width: 789.98px; background-color: white;" class="statediagram" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg defs #statediagram-barbEnd{fill:#333333;stroke:#333333;}#my-svg g.stateGroup text{fill:#9370DB;stroke:none;font-size:10px;}#my-svg g.stateGroup text{fill:#333;stroke:none;font-size:10px;}#my-svg g.stateGroup .state-title{font-weight:bolder;fill:#131300;}#my-svg g.stateGroup rect{fill:#ECECFF;stroke:#9370DB;}#my-svg g.stateGroup line{stroke:#333333;stroke-width:1;}#my-svg .transition{stroke:#333333;stroke-width:1;fill:none;}#my-svg .stateGroup .composit{fill:white;border-bottom:1px;}#my-svg .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#my-svg .state-note{stroke:#aaaa33;fill:#fff5ad;}#my-svg .state-note text{fill:black;stroke:none;font-size:10px;}#my-svg .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#my-svg .edgeLabel .label rect{fill:#ECECFF;opacity:0.5;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .edgeLabel .label text{fill:#333;}#my-svg .label div .edgeLabel{color:#333;}#my-svg .stateLabel text{fill:#131300;font-size:10px;font-weight:bold;}#my-svg .node circle.state-start{fill:#333333;stroke:#333333;}#my-svg .node .fork-join{fill:#333333;stroke:#333333;}#my-svg .node circle.state-end{fill:#9370DB;stroke:white;stroke-width:1.5;}#my-svg .end-state-inner{fill:white;stroke-width:1.5;}#my-svg .node rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .node polygon{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg #statediagram-barbEnd{fill:#333333;}#my-svg .statediagram-cluster rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .cluster-label,#my-svg .nodeLabel{color:#131300;}#my-svg .statediagram-cluster rect.outer{rx:5px;ry:5px;}#my-svg .statediagram-state .divider{stroke:#9370DB;}#my-svg .statediagram-state .title-state{rx:5px;ry:5px;}#my-svg .statediagram-cluster.statediagram-cluster .inner{fill:white;}#my-svg .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f0f0f0;}#my-svg .statediagram-cluster .inner{rx:0;ry:0;}#my-svg .statediagram-state rect.basic{rx:5px;ry:5px;}#my-svg .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#f0f0f0;}#my-svg .note-edge{stroke-dasharray:5;}#my-svg .statediagram-note rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#my-svg .statediagram-note rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#my-svg .statediagram-note text{fill:black;}#my-svg .statediagram-note .nodeLabel{color:black;}#my-svg .statediagram .edgeLabel{color:red;}#my-svg #dependencyStart,#my-svg #dependencyEnd{fill:#333333;stroke:#333333;stroke-width:1;}#my-svg .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><defs><marker orient="auto" markerUnits="userSpaceOnUse" markerHeight="14" markerWidth="20" refY="7" refX="19" id="my-svg_stateDiagram-barbEnd"><path d="M 19,7 L9,13 L14,7 L9,1 Z"/></marker></defs><g class="root"><g class="clusters"/><g class="edgePaths"><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge0" d="M431.645,22L431.645,28.167C431.645,34.333,431.645,46.667,431.645,59C431.645,71.333,431.645,83.667,431.645,89.833L431.645,96"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge1" d="M431.645,136L431.645,144.167C431.645,152.333,431.645,168.667,431.645,185C431.645,201.333,431.645,217.667,431.645,225.833L431.645,234"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge2" d="M431.645,274L431.645,280.167C431.645,286.333,431.645,298.667,431.645,311C431.645,323.333,431.645,335.667,431.645,341.833L431.645,348"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge3" d="M370.379,380.396L323.755,389.83C277.13,399.264,183.882,418.132,137.257,435.733C90.633,453.333,90.633,469.667,90.633,477.833L90.633,486"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge4" d="M90.633,526L90.633,532.167C90.633,538.333,90.633,550.667,99.737,563C108.841,575.333,127.05,587.667,136.154,593.833L145.258,600"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge5" d="M162.531,520.869L196.484,527.891C230.438,534.913,298.344,548.956,332.297,562.145C366.25,575.333,366.25,587.667,366.25,593.833L366.25,600"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge6" d="M204.312,600L213.416,593.833C222.521,587.667,240.729,575.333,249.833,559.667C258.938,544,258.938,525,258.938,504C258.938,483,258.938,460,279.379,440.333C299.82,420.667,340.702,404.333,361.143,396.167L381.585,388"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge7" d="M366.25,640L366.25,650.167C366.25,660.333,366.25,680.667,366.25,701C366.25,721.333,366.25,741.667,366.25,751.833L366.25,762"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge8" d="M366.25,802L366.25,810.167C366.25,818.333,366.25,834.667,366.25,851C366.25,867.333,366.25,883.667,366.25,891.833L366.25,900"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge9" d="M366.25,940L366.25,946.167C366.25,952.333,366.25,964.667,379.428,977.694C392.605,990.722,418.961,1004.443,432.139,1011.304L445.316,1018.165"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge10" d="M506.145,1018.165L519.322,1011.304C532.5,1004.443,558.855,990.722,572.033,974.361C585.211,958,585.211,939,585.211,918C585.211,897,585.211,874,585.211,851C585.211,828,585.211,805,585.211,780C585.211,755,585.211,728,585.211,701C585.211,674,585.211,647,585.211,624C585.211,601,585.211,582,585.211,563C585.211,544,585.211,525,585.211,504C585.211,483,585.211,460,567.035,440.333C548.859,420.667,512.508,404.333,494.332,396.167L476.157,388"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge11" d="M475.73,1054L475.73,1064.167C475.73,1074.333,475.73,1094.667,475.73,1115C475.73,1135.333,475.73,1155.667,475.73,1165.833L475.73,1176"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge12" d="M475.73,1216L475.73,1224.167C475.73,1232.333,475.73,1248.667,482.832,1265C489.933,1281.333,504.136,1297.667,511.238,1305.833L518.339,1314"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge13" d="M580.238,1315.824L600.98,1307.353C621.723,1298.883,663.207,1281.941,683.949,1261.971C704.691,1242,704.691,1219,704.691,1194C704.691,1169,704.691,1142,704.691,1115C704.691,1088,704.691,1061,704.691,1038C704.691,1015,704.691,996,704.691,977C704.691,958,704.691,939,704.691,918C704.691,897,704.691,874,704.691,851C704.691,828,704.691,805,704.691,780C704.691,755,704.691,728,704.691,701C704.691,674,704.691,647,704.691,624C704.691,601,704.691,582,704.691,563C704.691,544,704.691,525,704.691,504C704.691,483,704.691,460,669.395,439.58C634.098,419.161,563.504,401.321,528.207,392.402L492.91,383.482"/></g><g class="edgeLabels"><g transform="translate(431.64453125, 59)" class="edgeLabel"><g transform="translate(-65.5859375, -12)" class="label"><foreignObject height="24" width="131.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>ClientRisk created</p></span></div></foreignObject></g></g><g transform="translate(431.64453125, 185)" class="edgeLabel"><g transform="translate(-79.7421875, -24)" class="label"><foreignObject height="48" width="159.484375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>waitForInit() called<br />Load from persistence</p></span></div></foreignObject></g></g><g transform="translate(431.64453125, 311)" class="edgeLabel"><g transform="translate(-71.7578125, -12)" class="label"><foreignObject height="24" width="143.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>checkSignal() called</p></span></div></foreignObject></g></g><g transform="translate(90.6328125, 437)" class="edgeLabel"><g transform="translate(-70.90625, -24)" class="label"><foreignObject height="48" width="141.8125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Build payload with<br />activePositionCount</p></span></div></foreignObject></g></g><g transform="translate(90.6328125, 563)" class="edgeLabel"><g transform="translate(-82.6328125, -12)" class="label"><foreignObject height="24" width="165.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Validation throws error</p></span></div></foreignObject></g></g><g transform="translate(366.25, 563)" class="edgeLabel"><g transform="translate(-68.171875, -12)" class="label"><foreignObject height="24" width="136.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>All validations pass</p></span></div></foreignObject></g></g><g transform="translate(258.9375, 506)" class="edgeLabel"><g transform="translate(-61.40625, -12)" class="label"><foreignObject height="24" width="122.8125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>New signal check</p></span></div></foreignObject></g></g><g transform="translate(366.25, 701)" class="edgeLabel"><g transform="translate(-100, -36)" class="label"><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>addSignal() called<br />by StrategyConnectionService</p></span></div></foreignObject></g></g><g transform="translate(366.25, 851)" class="edgeLabel"><g transform="translate(-72.140625, -24)" class="label"><foreignObject height="48" width="144.28125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>_updatePositions()<br />atomic write to disk</p></span></div></foreignObject></g></g><g transform="translate(366.25, 977)" class="edgeLabel"><g transform="translate(-67.40625, -12)" class="label"><foreignObject height="24" width="134.8125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Position monitored</p></span></div></foreignObject></g></g><g transform="translate(585.2109375, 701)" class="edgeLabel"><g transform="translate(-98.9609375, -24)" class="label"><foreignObject height="48" width="197.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>New signal check<br />(position visible in payload)</p></span></div></foreignObject></g></g><g transform="translate(475.73046875, 1115)" class="edgeLabel"><g transform="translate(-100, -36)" class="label"><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>removeSignal() called<br />by StrategyConnectionService</p></span></div></foreignObject></g></g><g transform="translate(475.73046875, 1265)" class="edgeLabel"><g transform="translate(-72.140625, -24)" class="label"><foreignObject height="48" width="144.28125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>_updatePositions()<br />atomic write to disk</p></span></div></foreignObject></g></g><g transform="translate(704.69140625, 851)" class="edgeLabel"><g transform="translate(-77.2890625, -12)" class="label"><foreignObject height="24" width="154.578125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Ready for new signals</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(431.64453125, 15)" id="state-root_start-0" class="node default"><circle height="14" width="14" r="7" class="state-start"/></g><g transform="translate(431.64453125, 116)" id="state-Idle-1" class="node  statediagram-state"><rect height="40" width="42.8125" y="-20" x="-21.40625" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-13.40625, -12)" style="" class="label"><rect/><foreignObject height="24" width="26.8125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Idle</p></span></div></foreignObject></g></g><g transform="translate(431.64453125, 254)" id="state-Initialized-2" class="node  statediagram-state"><rect height="40" width="87.59375" y="-20" x="-43.796875" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-35.796875, -12)" style="" class="label"><rect/><foreignObject height="24" width="71.59375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Initialized</p></span></div></foreignObject></g></g><g transform="translate(431.64453125, 368)" id="state-CheckingSignal-13" class="node  statediagram-state"><rect height="40" width="122.53125" y="-20" x="-61.265625" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-53.265625, -12)" style="" class="label"><rect/><foreignObject height="24" width="106.53125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CheckingSignal</p></span></div></foreignObject></g></g><g transform="translate(90.6328125, 506)" id="state-ValidationRunning-5" class="node  statediagram-state"><rect height="40" width="143.796875" y="-20" x="-71.8984375" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-63.8984375, -12)" style="" class="label"><rect/><foreignObject height="24" width="127.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ValidationRunning</p></span></div></foreignObject></g></g><g transform="translate(174.78515625, 620)" id="state-Rejected-6" class="node  statediagram-state"><rect height="40" width="79.890625" y="-20" x="-39.9453125" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-31.9453125, -12)" style="" class="label"><rect/><foreignObject height="24" width="63.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Rejected</p></span></div></foreignObject></g></g><g transform="translate(366.25, 620)" id="state-Allowed-7" class="node  statediagram-state"><rect height="40" width="73.015625" y="-20" x="-36.5078125" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-28.5078125, -12)" style="" class="label"><rect/><foreignObject height="24" width="57.015625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Allowed</p></span></div></foreignObject></g></g><g transform="translate(366.25, 782)" id="state-PositionAdded-8" class="node  statediagram-state"><rect height="40" width="116.9375" y="-20" x="-58.46875" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-50.46875, -12)" style="" class="label"><rect/><foreignObject height="24" width="100.9375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PositionAdded</p></span></div></foreignObject></g></g><g transform="translate(366.25, 920)" id="state-Persisted-9" class="node  statediagram-state"><rect height="40" width="80.625" y="-20" x="-40.3125" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-32.3125, -12)" style="" class="label"><rect/><foreignObject height="24" width="64.625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Persisted</p></span></div></foreignObject></g></g><g transform="translate(475.73046875, 1034)" id="state-Active-11" class="node  statediagram-state"><rect height="40" width="60.828125" y="-20" x="-30.4140625" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-22.4140625, -12)" style="" class="label"><rect/><foreignObject height="24" width="44.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Active</p></span></div></foreignObject></g></g><g transform="translate(475.73046875, 1196)" id="state-PositionRemoved-12" class="node  statediagram-state"><rect height="40" width="136.765625" y="-20" x="-68.3828125" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-60.3828125, -12)" style="" class="label"><rect/><foreignObject height="24" width="120.765625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PositionRemoved</p></span></div></foreignObject></g></g><g transform="translate(535.73046875, 1334)" id="state-Persisted2-13" class="node  statediagram-state"><rect height="40" width="89.015625" y="-20" x="-44.5078125" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-36.5078125, -12)" style="" class="label"><rect/><foreignObject height="24" width="73.015625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Persisted2</p></span></div></foreignObject></g></g></g></g></g></svg>