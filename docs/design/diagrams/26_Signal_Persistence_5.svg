<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 747.984375 1039.78125" style="max-width: 747.984px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#my-svg .persist&gt;*{fill:#f9f9f9!important;stroke:#333!important;stroke-width:2px!important;}#my-svg .persist span{fill:#f9f9f9!important;stroke:#333!important;stroke-width:2px!important;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Start_CheckPending_0" d="M383.414,62L383.414,66.167C383.414,70.333,383.414,78.667,383.484,86.417C383.555,94.167,383.695,101.334,383.765,104.917L383.836,108.501"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckPending_GenSignal_0" d="M327.492,220.891L293.6,236.378C259.708,251.865,191.925,282.839,158.033,303.826C124.141,324.813,124.141,335.813,124.141,341.313L124.141,346.813"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_GenSignal_Validate_0" d="M124.141,428.813L124.141,432.979C124.141,437.146,124.141,445.479,124.141,460.727C124.141,475.974,124.141,498.135,124.141,509.216L124.141,520.297"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Validate_PersistOpen_0" d="M124.141,602.297L124.141,616.044C124.141,629.792,124.141,657.286,124.141,676.534C124.141,695.781,124.141,706.781,124.141,712.281L124.141,717.781"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PersistOpen_YieldOpen_0" d="M124.141,799.781L124.141,803.948C124.141,808.115,124.141,816.448,124.141,826.115C124.141,835.781,124.141,846.781,124.141,852.281L124.141,857.781"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckPending_Monitor_0" d="M427.543,233.683L442.58,247.038C457.616,260.393,487.689,287.103,502.725,305.958C517.762,324.813,517.762,335.813,517.762,341.313L517.762,346.813"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Monitor_CheckClose_0" d="M517.762,428.813L517.762,432.979C517.762,437.146,517.762,445.479,517.832,453.229C517.902,460.979,518.043,468.146,518.113,471.73L518.183,475.313"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckClose_CalcPnL_0" d="M475.43,605.449L461.664,618.671C447.898,631.893,420.367,658.337,406.602,677.059C392.836,695.781,392.836,706.781,392.836,712.281L392.836,717.781"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcPnL_PersistClose_0" d="M392.836,799.781L392.836,803.948C392.836,808.115,392.836,816.448,392.836,824.115C392.836,831.781,392.836,838.781,392.836,842.281L392.836,845.781"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PersistClose_YieldClosed_0" d="M392.836,927.781L392.836,931.948C392.836,936.115,392.836,944.448,392.836,952.115C392.836,959.781,392.836,966.781,392.836,970.281L392.836,973.781"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckClose_YieldActive_0" d="M561.094,605.449L574.693,618.671C588.292,631.893,615.49,658.337,629.089,679.059C642.688,699.781,642.688,714.781,642.688,722.281L642.688,729.781"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(124.140625, 313.8125)" class="edgeLabel"><g transform="translate(-9.3984375, -12)" class="label"><foreignObject height="24" width="18.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(517.76171875, 313.8125)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(392.8359375, 684.78125)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(642.6875, 684.78125)" class="edgeLabel"><g transform="translate(-9.3984375, -12)" class="label"><foreignObject height="24" width="18.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(383.4140625, 35)" id="flowchart-Start-0" class="node default"><rect height="54" width="146.875" y="-27" x="-73.4375" style="" class="basic label-container"/><g transform="translate(-43.4375, -12)" style="" class="label"><rect/><foreignObject height="24" width="86.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>tick() called</p></span></div></foreignObject></g></g><g transform="translate(383.4140625, 194.40625)" id="flowchart-CheckPending-1" class="node default"><polygon transform="translate(-82.40625,82.40625)" class="label-container" points="82.40625,0 164.8125,-82.40625 82.40625,-164.8125 0,-82.40625"/><g transform="translate(-43.40625, -24)" style="" class="label"><rect/><foreignObject height="48" width="86.8125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Has pending<br />signal?</p></span></div></foreignObject></g></g><g transform="translate(124.140625, 389.8125)" id="flowchart-GenSignal-2" class="node default"><rect height="78" width="218.59375" y="-39" x="-109.296875" style="" class="basic label-container"/><g transform="translate(-79.296875, -24)" style="" class="label"><rect/><foreignObject height="48" width="158.59375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GET_SIGNAL_FN()<br />(throttled generation)</p></span></div></foreignObject></g></g><g transform="translate(124.140625, 563.296875)" id="flowchart-Validate-3" class="node default"><rect height="78" width="223.171875" y="-39" x="-111.5859375" style="" class="basic label-container"/><g transform="translate(-81.5859375, -24)" style="" class="label"><rect/><foreignObject height="48" width="163.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>VALIDATE_SIGNAL_FN()<br />(price/TP/SL checks)</p></span></div></foreignObject></g></g><g transform="translate(124.140625, 760.78125)" id="flowchart-PersistOpen-4" class="node default persist"><rect height="78" width="232.28125" y="-39" x="-116.140625" style="fill:#f9f9f9 !important;stroke:#333 !important;stroke-width:2px !important" class="basic label-container"/><g transform="translate(-86.140625, -24)" style="" class="label"><rect/><foreignObject height="48" width="172.28125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>setPendingSignal(signal)<br />Atomic write</p></span></div></foreignObject></g></g><g transform="translate(124.140625, 888.78125)" id="flowchart-YieldOpen-5" class="node default"><rect height="54" width="203.40625" y="-27" x="-101.703125" style="" class="basic label-container"/><g transform="translate(-71.703125, -12)" style="" class="label"><rect/><foreignObject height="24" width="143.40625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>yield 'opened' result</p></span></div></foreignObject></g></g><g transform="translate(517.76171875, 389.8125)" id="flowchart-Monitor-6" class="node default"><rect height="78" width="191.265625" y="-39" x="-95.6328125" style="" class="basic label-container"/><g transform="translate(-65.6328125, -24)" style="" class="label"><rect/><foreignObject height="48" width="131.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Monitor VWAP<br />Check TP/SL/time</p></span></div></foreignObject></g></g><g transform="translate(517.76171875, 563.296875)" id="flowchart-CheckClose-7" class="node default"><polygon transform="translate(-84.484375,84.484375)" class="label-container" points="84.484375,0 168.96875,-84.484375 84.484375,-168.96875 0,-84.484375"/><g transform="translate(-33.484375, -36)" style="" class="label"><rect/><foreignObject height="72" width="66.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Close<br />condition<br />met?</p></span></div></foreignObject></g></g><g transform="translate(392.8359375, 760.78125)" id="flowchart-CalcPnL-8" class="node default"><rect height="78" width="205.109375" y="-39" x="-102.5546875" style="" class="basic label-container"/><g transform="translate(-72.5546875, -24)" style="" class="label"><rect/><foreignObject height="48" width="145.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>toProfitLossDto()<br />(with fees/slippage)</p></span></div></foreignObject></g></g><g transform="translate(392.8359375, 888.78125)" id="flowchart-PersistClose-9" class="node default persist"><rect height="78" width="218.265625" y="-39" x="-109.1328125" style="fill:#f9f9f9 !important;stroke:#333 !important;stroke-width:2px !important" class="basic label-container"/><g transform="translate(-79.1328125, -24)" style="" class="label"><rect/><foreignObject height="48" width="158.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>setPendingSignal(null)<br />Atomic write</p></span></div></foreignObject></g></g><g transform="translate(392.8359375, 1004.78125)" id="flowchart-YieldClosed-10" class="node default"><rect height="54" width="196.140625" y="-27" x="-98.0703125" style="" class="basic label-container"/><g transform="translate(-68.0703125, -12)" style="" class="label"><rect/><foreignObject height="24" width="136.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>yield 'closed' result</p></span></div></foreignObject></g></g><g transform="translate(642.6875, 760.78125)" id="flowchart-YieldActive-11" class="node default"><rect height="54" width="194.59375" y="-27" x="-97.296875" style="" class="basic label-container"/><g transform="translate(-67.296875, -12)" style="" class="label"><rect/><foreignObject height="24" width="134.59375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>yield 'active' result</p></span></div></foreignObject></g></g></g></g></g></svg>