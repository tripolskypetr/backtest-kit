<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1792.828125 596" style="max-width: 1792.83px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph2" class="cluster"><rect height="104" width="1776.828125" y="484" x="8" style=""/><g transform="translate(847.328125, 484)" class="cluster-label"><foreignObject height="24" width="98.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Storage Layer</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="176" width="1249.1875" y="234" x="501.84375" style=""/><g transform="translate(1052.203125, 234)" class="cluster-label"><foreignObject height="24" width="148.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Persistence Adapters</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="152" width="965.21875" y="8" x="55.7265625" style=""/><g transform="translate(466.0078125, 8)" class="cluster-label"><foreignObject height="24" width="144.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientStrategy State</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PendingSignal_PSA_0" d="M446.035,114.507L478.344,122.09C510.654,129.672,575.272,144.836,607.581,158.585C639.891,172.333,639.891,184.667,639.891,197C639.891,209.333,639.891,221.667,639.891,231.333C639.891,241,639.891,248,639.891,251.5L639.891,255"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ScheduledSignal_PSCH_0" d="M862.504,134.423L873.494,138.686C884.484,142.949,906.465,151.474,917.455,161.904C928.445,172.333,928.445,184.667,928.445,197C928.445,209.333,928.445,221.667,928.445,231.333C928.445,241,928.445,248,928.445,251.5L928.445,255"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PSA_SignalFile_0" d="M639.891,385L639.891,389.167C639.891,393.333,639.891,401.667,615.133,412C590.376,422.333,540.862,434.667,516.105,447C491.348,459.333,491.348,471.667,470.318,481.874C449.288,492.082,407.229,500.163,386.199,504.204L365.17,508.245"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PSCH_ScheduleFile_0" d="M928.445,385L928.445,389.167C928.445,393.333,928.445,401.667,928.445,412C928.445,422.333,928.445,434.667,928.445,447C928.445,459.333,928.445,471.667,920.974,481.694C913.503,491.721,898.56,499.442,891.089,503.303L883.618,507.164"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PRA_RiskFile_0" d="M1262.961,385L1262.961,389.167C1262.961,393.333,1262.961,401.667,1262.961,412C1262.961,422.333,1262.961,434.667,1262.961,447C1262.961,459.333,1262.961,471.667,1262.961,481.333C1262.961,491,1262.961,498,1262.961,501.5L1262.961,505"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PPA_PartialFile_0" d="M1608.078,385L1608.078,389.167C1608.078,393.333,1608.078,401.667,1608.078,412C1608.078,422.333,1608.078,434.667,1608.078,447C1608.078,459.333,1608.078,471.667,1608.078,481.333C1608.078,491,1608.078,498,1608.078,501.5L1608.078,505"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_SignalFile_PendingSignal_0" d="M194.623,509L190.595,504.833C186.566,500.667,178.51,492.333,174.481,482C170.453,471.667,170.453,459.333,170.453,447C170.453,434.667,170.453,422.333,170.453,401.5C170.453,380.667,170.453,351.333,170.453,322C170.453,292.667,170.453,263.333,170.453,242.5C170.453,221.667,170.453,209.333,170.453,197C170.453,184.667,170.453,172.333,177.844,162.309C185.234,152.284,200.015,144.567,207.406,140.709L214.796,136.851"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ScheduleFile_ScheduledSignal_0" d="M687.298,509L665.613,504.833C643.929,500.667,600.56,492.333,578.876,482C557.191,471.667,557.191,459.333,532.434,447C507.677,434.667,458.163,422.333,433.406,401.5C408.648,380.667,408.648,351.333,408.648,322C408.648,292.667,408.648,263.333,408.648,242.5C408.648,221.667,408.648,209.333,408.648,197C408.648,184.667,408.648,172.333,440.309,158.737C471.969,145.14,535.289,130.281,566.949,122.851L598.61,115.421"/></g><g class="edgeLabels"><g transform="translate(639.890625, 197)" class="edgeLabel"><g transform="translate(-65.671875, -12)" class="label"><foreignObject height="24" width="131.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>setPendingSignal()</p></span></div></foreignObject></g></g><g transform="translate(928.4453125, 197)" class="edgeLabel"><g transform="translate(-74.28125, -12)" class="label"><foreignObject height="24" width="148.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>setScheduledSignal()</p></span></div></foreignObject></g></g><g transform="translate(491.34765625, 447)" class="edgeLabel"><g transform="translate(-45.84375, -12)" class="label"><foreignObject height="24" width="91.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>atomic write</p></span></div></foreignObject></g></g><g transform="translate(928.4453125, 447)" class="edgeLabel"><g transform="translate(-45.84375, -12)" class="label"><foreignObject height="24" width="91.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>atomic write</p></span></div></foreignObject></g></g><g transform="translate(1262.9609375, 447)" class="edgeLabel"><g transform="translate(-45.84375, -12)" class="label"><foreignObject height="24" width="91.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>atomic write</p></span></div></foreignObject></g></g><g transform="translate(1608.078125, 447)" class="edgeLabel"><g transform="translate(-45.84375, -12)" class="label"><foreignObject height="24" width="91.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>atomic write</p></span></div></foreignObject></g></g><g transform="translate(170.453125, 322)" class="edgeLabel"><g transform="translate(-73.1953125, -12)" class="label"><foreignObject height="24" width="146.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>waitForInit() restore</p></span></div></foreignObject></g></g><g transform="translate(408.6484375, 322)" class="edgeLabel"><g transform="translate(-73.1953125, -12)" class="label"><foreignObject height="24" width="146.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>waitForInit() restore</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(316.03515625, 84)" id="flowchart-PendingSignal-0" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -36)" style="" class="label"><rect/><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>_pendingSignal: ISignalRow | null<br />(active position)</p></span></div></foreignObject></g></g><g transform="translate(732.50390625, 84)" id="flowchart-ScheduledSignal-1" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -36)" style="" class="label"><rect/><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>_scheduledSignal: IScheduledSignalRow | null<br />(limit order)</p></span></div></foreignObject></g></g><g transform="translate(639.890625, 322)" id="flowchart-PSA-2" class="node default"><rect height="126" width="206.09375" y="-63" x="-103.046875" style="" class="basic label-container"/><g transform="translate(-73.046875, -48)" style="" class="label"><rect/><foreignObject height="96" width="146.09375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PersistSignalAdapter<br />readSignalData()<br />writeSignalData()<br />Atomic file writes</p></span></div></foreignObject></g></g><g transform="translate(928.4453125, 322)" id="flowchart-PSCH-3" class="node default"><rect height="126" width="228.125" y="-63" x="-114.0625" style="" class="basic label-container"/><g transform="translate(-84.0625, -48)" style="" class="label"><rect/><foreignObject height="96" width="168.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PersistScheduleAdapter<br />readScheduleData()<br />writeScheduleData()<br />Atomic file writes</p></span></div></foreignObject></g></g><g transform="translate(1262.9609375, 322)" id="flowchart-PRA-4" class="node default"><rect height="126" width="225.71875" y="-63" x="-112.859375" style="" class="basic label-container"/><g transform="translate(-82.859375, -48)" style="" class="label"><rect/><foreignObject height="96" width="165.71875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PersistRiskAdapter<br />readRiskData()<br />writeRiskData()<br />Active position registry</p></span></div></foreignObject></g></g><g transform="translate(1608.078125, 322)" id="flowchart-PPA-5" class="node default"><rect height="126" width="215.90625" y="-63" x="-107.953125" style="" class="basic label-container"/><g transform="translate(-77.953125, -48)" style="" class="label"><rect/><foreignObject height="96" width="155.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PersistPartialAdapter<br />readPartialData()<br />writePartialData()<br />Profit/loss milestones</p></span></div></foreignObject></g></g><g transform="translate(220.7265625, 536)" id="flowchart-SignalFile-6" class="node default"><rect height="54" width="355.453125" y="-27" x="-177.7265625" style="" class="basic label-container"/><g transform="translate(-147.7265625, -12)" style="" class="label"><rect/><foreignObject height="24" width="295.453125"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>./persist/signal/{symbol}_{strategy}.json</p></span></div></foreignObject></g></g><g transform="translate(827.8125, 536)" id="flowchart-ScheduleFile-7" class="node default"><rect height="54" width="377.484375" y="-27" x="-188.7421875" style="" class="basic label-container"/><g transform="translate(-158.7421875, -12)" style="" class="label"><rect/><foreignObject height="24" width="317.484375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>./persist/schedule/{symbol}_{strategy}.json</p></span></div></foreignObject></g></g><g transform="translate(1262.9609375, 536)" id="flowchart-RiskFile-8" class="node default"><rect height="54" width="306.734375" y="-27" x="-153.3671875" style="" class="basic label-container"/><g transform="translate(-123.3671875, -12)" style="" class="label"><rect/><foreignObject height="24" width="246.734375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>./persist/risk/{symbol}_{risk}.json</p></span></div></foreignObject></g></g><g transform="translate(1608.078125, 536)" id="flowchart-PartialFile-9" class="node default"><rect height="54" width="283.5" y="-27" x="-141.75" style="" class="basic label-container"/><g transform="translate(-111.75, -12)" style="" class="label"><rect/><foreignObject height="24" width="223.5"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>./persist/partial/{symbol}.json</p></span></div></foreignObject></g></g></g></g></g></svg>