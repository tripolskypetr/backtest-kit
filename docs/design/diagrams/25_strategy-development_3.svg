<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1329.015625 1190" style="max-width: 1329.02px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph3" class="cluster"><rect height="409" width="305.6875" y="773" x="8" style=""/><g transform="translate(93.296875, 773)" class="cluster-label"><foreignObject height="24" width="135.09375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>User-Defined Logic</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph2" class="cluster"><rect height="562" width="327.484375" y="467" x="333.6875" style=""/><g transform="translate(454.015625, 467)" class="cluster-label"><foreignObject height="24" width="86.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Client Layer</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="537" width="639.84375" y="186" x="681.171875" style=""/><g transform="translate(953.1640625, 186)" class="cluster-label"><foreignObject height="24" width="95.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Service Layer</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="128" width="589.8046875" y="8" x="710.4296875" style=""/><g transform="translate(947.98046875, 8)" class="cluster-label"><foreignObject height="24" width="114.703125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Public API Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_addStrategy_StrategyValidation_0" d="M846.375,111L846.375,115.167C846.375,119.333,846.375,127.667,846.375,136C846.375,144.333,846.375,152.667,846.375,161C846.375,169.333,846.375,177.667,846.375,185.333C846.375,193,846.375,200,846.375,203.5L846.375,207"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_StrategyValidation_StrategySchema_0" d="M846.375,289L846.375,293.167C846.375,297.333,846.375,305.667,846.375,313.333C846.375,321,846.375,328,846.375,331.5L846.375,335"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Backtest_MethodContext_0" d="M1151.914,111L1151.914,115.167C1151.914,119.333,1151.914,127.667,1151.914,136C1151.914,144.333,1151.914,152.667,1151.914,161C1151.914,169.333,1151.914,177.667,1151.914,185.333C1151.914,193,1151.914,200,1151.914,203.5L1151.914,207"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_MethodContext_StrategyConnection_0" d="M1151.914,289L1151.914,293.167C1151.914,297.333,1151.914,305.667,1151.914,313.333C1151.914,321,1151.914,328,1151.914,331.5L1151.914,335"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_StrategyConnection_ClientStrategy_0" d="M1151.914,417L1151.914,421.167C1151.914,425.333,1151.914,433.667,1151.914,442C1151.914,450.333,1151.914,458.667,1064.954,471.337C977.994,484.007,804.073,501.014,717.113,509.518L630.153,518.021"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientStrategy_ExecutionContext_0" d="M541.226,570L545.905,574.167C550.584,578.333,559.943,586.667,615.594,598.388C671.246,610.11,773.192,625.221,824.164,632.776L875.137,640.331"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientStrategy_GET_SIGNAL_FN_0" d="M484.833,570L483.487,574.167C482.141,578.333,479.449,586.667,478.104,594.333C476.758,602,476.758,609,476.758,612.5L476.758,616"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_GET_SIGNAL_FN_getSignal_0" d="M476.758,698L476.758,702.167C476.758,706.333,476.758,714.667,476.758,723C476.758,731.333,476.758,739.667,476.758,748C476.758,756.333,476.758,764.667,444.399,775.389C412.041,786.111,347.325,799.221,314.966,805.777L282.608,812.332"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_getSignal_VALIDATE_SIGNAL_FN_0" d="M160.844,876L160.844,880.167C160.844,884.333,160.844,892.667,198.668,904.025C236.492,915.384,312.141,929.768,349.965,936.96L387.789,944.152"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_VALIDATE_SIGNAL_FN_callbacks_0" d="M497.43,1004L497.43,1008.167C497.43,1012.333,497.43,1020.667,441.332,1029C385.234,1037.333,273.039,1045.667,216.941,1053.333C160.844,1061,160.844,1068,160.844,1071.5L160.844,1075"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(846.375, 72)" id="flowchart-addStrategy-0" class="node default"><rect height="78" width="201.890625" y="-39" x="-100.9453125" style="" class="basic label-container"/><g transform="translate(-70.9453125, -24)" style="" class="label"><rect/><foreignObject height="48" width="141.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>addStrategy()<br />src/function/add.ts</p></span></div></foreignObject></g></g><g transform="translate(1151.9140625, 72)" id="flowchart-Backtest-1" class="node default"><rect height="78" width="226.640625" y="-39" x="-113.3203125" style="" class="basic label-container"/><g transform="translate(-83.3203125, -24)" style="" class="label"><rect/><foreignObject height="48" width="166.640625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Backtest.run()<br />src/classes/Backtest.ts</p></span></div></foreignObject></g></g><g transform="translate(846.375, 378)" id="flowchart-StrategySchema-2" class="node default"><rect height="78" width="242.875" y="-39" x="-121.4375" style="" class="basic label-container"/><g transform="translate(-91.4375, -24)" style="" class="label"><rect/><foreignObject height="48" width="182.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>StrategySchemaService<br />src/lib/services/schema/</p></span></div></foreignObject></g></g><g transform="translate(846.375, 250)" id="flowchart-StrategyValidation-3" class="node default"><rect height="78" width="260.40625" y="-39" x="-130.203125" style="" class="basic label-container"/><g transform="translate(-100.203125, -24)" style="" class="label"><rect/><foreignObject height="48" width="200.40625"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>StrategyValidationService<br />src/lib/services/validation/</p></span></div></foreignObject></g></g><g transform="translate(1151.9140625, 378)" id="flowchart-StrategyConnection-4" class="node default"><rect height="78" width="268.203125" y="-39" x="-134.1015625" style="" class="basic label-container"/><g transform="translate(-104.1015625, -24)" style="" class="label"><rect/><foreignObject height="48" width="208.203125"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>StrategyConnectionService<br />src/lib/services/connection/</p></span></div></foreignObject></g></g><g transform="translate(1151.9140625, 250)" id="flowchart-MethodContext-5" class="node default"><rect height="78" width="244" y="-39" x="-122" style="" class="basic label-container"/><g transform="translate(-92, -24)" style="" class="label"><rect/><foreignObject height="48" width="184"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>MethodContextService<br />src/lib/services/context/</p></span></div></foreignObject></g></g><g transform="translate(1001.09375, 659)" id="flowchart-ExecutionContext-6" class="node default"><rect height="78" width="244" y="-39" x="-122" style="" class="basic label-container"/><g transform="translate(-92, -24)" style="" class="label"><rect/><foreignObject height="48" width="184"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ExecutionContextService<br />src/lib/services/context/</p></span></div></foreignObject></g></g><g transform="translate(497.4296875, 531)" id="flowchart-ClientStrategy-7" class="node default"><rect height="78" width="257.484375" y="-39" x="-128.7421875" style="fill:#f9f9f9 !important" class="basic label-container"/><g transform="translate(-98.7421875, -24)" style="" class="label"><rect/><foreignObject height="48" width="197.484375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientStrategy<br />src/client/ClientStrategy.ts</p></span></div></foreignObject></g></g><g transform="translate(476.7578125, 659)" id="flowchart-GET_SIGNAL_FN-8" class="node default"><rect height="78" width="174.796875" y="-39" x="-87.3984375" style="" class="basic label-container"/><g transform="translate(-57.3984375, -24)" style="" class="label"><rect/><foreignObject height="48" width="114.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GET_SIGNAL_FN<br />lines 332-476</p></span></div></foreignObject></g></g><g transform="translate(497.4296875, 965)" id="flowchart-VALIDATE_SIGNAL_FN-9" class="node default"><rect height="78" width="211.421875" y="-39" x="-105.7109375" style="" class="basic label-container"/><g transform="translate(-75.7109375, -24)" style="" class="label"><rect/><foreignObject height="48" width="151.421875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>VALIDATE_SIGNAL_FN<br />lines 45-330</p></span></div></foreignObject></g></g><g transform="translate(160.84375, 837)" id="flowchart-getSignal-10" class="node default"><rect height="78" width="235.6875" y="-39" x="-117.84375" style="fill:#ffffcc !important" class="basic label-container"/><g transform="translate(-87.84375, -24)" style="" class="label"><rect/><foreignObject height="48" width="175.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>getSignal(symbol, when)<br />User implementation</p></span></div></foreignObject></g></g><g transform="translate(160.84375, 1118)" id="flowchart-callbacks-11" class="node default"><rect height="78" width="220.15625" y="-39" x="-110.078125" style="fill:#ffffcc !important" class="basic label-container"/><g transform="translate(-80.078125, -24)" style="" class="label"><rect/><foreignObject height="48" width="160.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>IStrategyCallbacks<br />onOpen, onClose, etc.</p></span></div></foreignObject></g></g></g></g></g></svg>