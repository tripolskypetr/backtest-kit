<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1061.9140625 2198.234375" style="max-width: 1061.91px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Start_CheckEmpty_0" d="M249.797,62L249.797,66.167C249.797,70.333,249.797,78.667,249.867,86.417C249.937,94.167,250.078,101.334,250.148,104.917L250.218,108.501"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckEmpty_ReturnOK1_0" d="M194.377,264.752L176.314,280.155C158.251,295.559,122.126,326.365,104.063,355.269C86,384.172,86,411.172,86,424.672L86,438.172"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckEmpty_CalcReference_0" d="M306.217,264.752L324.113,280.155C342.009,295.559,377.801,326.365,395.698,347.269C413.594,368.172,413.594,379.172,413.594,384.672L413.594,390.172"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcReference_CheckRefZero_0" d="M413.594,544.172L413.594,548.339C413.594,552.505,413.594,560.839,413.664,568.589C413.734,576.339,413.875,583.506,413.945,587.089L414.015,590.673"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckRefZero_ThrowRefError_0" d="M364.814,754.002L351.852,768.298C338.89,782.595,312.967,811.188,300.005,832.985C287.043,854.781,287.043,869.781,287.043,877.281L287.043,884.781"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckRefZero_CalcThreshold_0" d="M483.782,733.593L519.496,751.291C555.21,768.989,626.638,804.385,662.352,827.583C698.066,850.781,698.066,861.781,698.066,867.281L698.066,872.781"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CalcThreshold_LoopCandles_0" d="M698.066,954.781L698.066,958.948C698.066,963.115,698.066,971.448,698.066,979.115C698.066,986.781,698.066,993.781,698.066,997.281L698.066,1000.781"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_LoopCandles_CheckFinite_0" d="M698.066,1058.781L698.066,1062.948C698.066,1067.115,698.066,1075.448,698.137,1083.198C698.207,1090.948,698.347,1098.115,698.418,1101.699L698.488,1105.282"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckFinite_ThrowFiniteError_0" d="M619.649,1255.661L574.366,1274.897C529.082,1294.133,438.516,1332.606,393.233,1366.035C347.949,1399.464,347.949,1427.849,347.949,1442.042L347.949,1456.234"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckFinite_CheckPositive_0" d="M659.658,1295.67L652.899,1308.238C646.14,1320.806,632.623,1345.942,625.939,1364.093C619.254,1382.245,619.403,1393.412,619.478,1398.995L619.552,1404.578"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckPositive_ThrowPositiveError_0" d="M570.229,1541.514L553.131,1555.827C536.034,1570.139,501.839,1598.765,484.742,1632.565C467.645,1666.365,467.645,1705.339,467.645,1724.826L467.645,1744.313"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckPositive_CheckAnomaly_0" d="M668.982,1541.514L685.913,1555.827C702.844,1570.139,736.705,1598.765,753.71,1618.661C770.715,1638.557,770.864,1649.724,770.939,1655.308L771.013,1660.891"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckAnomaly_ThrowAnomalyError_0" d="M742.951,1882.619L739.649,1893.388C736.348,1904.157,729.744,1925.696,726.442,1941.965C723.141,1958.234,723.141,1969.234,723.141,1974.734L723.141,1980.234"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CheckAnomaly_NextCandle_0" d="M825.328,1856.472L837.266,1871.599C849.203,1886.726,873.078,1916.98,893.02,1939.812C912.962,1962.643,928.971,1978.052,936.976,1985.756L944.98,1993.46"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_NextCandle_CheckFinite_0" d="M981.479,1996.234L983.162,1988.068C984.845,1979.901,988.212,1963.568,989.895,1928.747C991.578,1893.927,991.578,1840.62,991.578,1787.313C991.578,1734.005,991.578,1680.698,991.578,1632.685C991.578,1584.672,991.578,1541.953,991.578,1499.234C991.578,1456.516,991.578,1413.797,955.772,1374.222C919.966,1334.646,848.353,1298.215,812.547,1279.999L776.74,1261.783"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_NextCandle_ReturnOK2_0" d="M975.914,2050.234L975.914,2058.401C975.914,2066.568,975.914,2082.901,975.914,2096.568C975.914,2110.234,975.914,2121.234,975.914,2126.734L975.914,2132.234"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(86, 357.171875)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g transform="translate(413.59375, 357.171875)" class="edgeLabel"><g transform="translate(-9.3984375, -12)" class="label"><foreignObject height="24" width="18.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(287.04296875, 839.78125)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g transform="translate(698.06640625, 839.78125)" class="edgeLabel"><g transform="translate(-9.3984375, -12)" class="label"><foreignObject height="24" width="18.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(347.94921875, 1371.078125)" class="edgeLabel"><g transform="translate(-9.3984375, -12)" class="label"><foreignObject height="24" width="18.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g transform="translate(619.10546875, 1371.078125)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g transform="translate(467.64453125, 1627.390625)" class="edgeLabel"><g transform="translate(-9.3984375, -12)" class="label"><foreignObject height="24" width="18.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g transform="translate(770.56640625, 1627.390625)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g transform="translate(723.140625, 1947.234375)" class="edgeLabel"><g transform="translate(-9.3984375, -12)" class="label"><foreignObject height="24" width="18.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g transform="translate(896.953125, 1947.234375)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g transform="translate(991.578125, 1627.390625)" class="edgeLabel"><g transform="translate(-46.8046875, -12)" class="label"><foreignObject height="24" width="93.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>More candles</p></span></div></foreignObject></g></g><g transform="translate(975.9140625, 2099.234375)" class="edgeLabel"><g transform="translate(-17.9375, -12)" class="label"><foreignObject height="24" width="35.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Done</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(249.796875, 35)" id="flowchart-Start-0" class="node default"><rect height="54" width="417.359375" y="-27" x="-208.6796875" style="" class="basic label-container"/><g transform="translate(-178.6796875, -12)" style="" class="label"><rect/><foreignObject height="24" width="357.359375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>VALIDATE_NO_INCOMPLETE_CANDLES_FN(candles)</p></span></div></foreignObject></g></g><g transform="translate(249.796875, 216.0859375)" id="flowchart-CheckEmpty-1" class="node default"><polygon transform="translate(-104.0859375,104.0859375)" class="label-container" points="104.0859375,0 208.171875,-104.0859375 104.0859375,-208.171875 0,-104.0859375"/><g transform="translate(-77.0859375, -12)" style="" class="label"><rect/><foreignObject height="24" width="154.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>candles.length === 0?</p></span></div></foreignObject></g></g><g transform="translate(86, 469.171875)" id="flowchart-ReturnOK1-2" class="node default"><rect height="54" width="156" y="-27" x="-78" style="" class="basic label-container"/><g transform="translate(-48, -12)" style="" class="label"><rect/><foreignObject height="24" width="96"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>return (valid)</p></span></div></foreignObject></g></g><g transform="translate(413.59375, 469.171875)" id="flowchart-CalcReference-3" class="node default"><rect height="150" width="399.1875" y="-75" x="-199.59375" style="" class="basic label-container"/><g transform="translate(-169.59375, -60)" style="" class="label"><rect/><foreignObject height="120" width="339.1875"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Calculate reference price:<br />- &gt;= CC_GET_CANDLES_MIN_CANDLES_FOR_MEDIAN:<br />  use median of OHLC<br />- &lt; threshold: use average of OHLC</p></span></div></foreignObject></g></g><g transform="translate(413.59375, 698.4765625)" id="flowchart-CheckRefZero-4" class="node default"><polygon transform="translate(-104.3046875,104.3046875)" class="label-container" points="104.3046875,0 208.609375,-104.3046875 104.3046875,-208.609375 0,-104.3046875"/><g transform="translate(-77.3046875, -12)" style="" class="label"><rect/><foreignObject height="24" width="154.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>referencePrice === 0?</p></span></div></foreignObject></g></g><g transform="translate(287.04296875, 915.78125)" id="flowchart-ThrowRefError-5" class="node default"><rect height="54" width="254.5625" y="-27" x="-127.28125" style="" class="basic label-container"/><g transform="translate(-97.28125, -12)" style="" class="label"><rect/><foreignObject height="24" width="194.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>throw Error: all prices zero</p></span></div></foreignObject></g></g><g transform="translate(698.06640625, 915.78125)" id="flowchart-CalcThreshold-6" class="node default"><rect height="78" width="467.484375" y="-39" x="-233.7421875" style="" class="basic label-container"/><g transform="translate(-203.7421875, -24)" style="" class="label"><rect/><foreignObject height="48" width="407.484375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>minValidPrice = referencePrice /<br />CC_GET_CANDLES_PRICE_ANOMALY_THRESHOLD_FACTOR</p></span></div></foreignObject></g></g><g transform="translate(698.06640625, 1031.78125)" id="flowchart-LoopCandles-7" class="node default"><rect height="54" width="196.265625" y="-27" x="-98.1328125" style="" class="basic label-container"/><g transform="translate(-68.1328125, -12)" style="" class="label"><rect/><foreignObject height="24" width="136.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>For each candle[i]:</p></span></div></foreignObject></g></g><g transform="translate(698.06640625, 1221.4296875)" id="flowchart-CheckFinite-8" class="node default"><polygon transform="translate(-112.6484375,112.6484375)" class="label-container" points="112.6484375,0 225.296875,-112.6484375 112.6484375,-225.296875 0,-112.6484375"/><g transform="translate(-85.6484375, -12)" style="" class="label"><rect/><foreignObject height="24" width="171.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>All OHLCV values finite?</p></span></div></foreignObject></g></g><g transform="translate(347.94921875, 1499.234375)" id="flowchart-ThrowFiniteError-9" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -24)" style="" class="label"><rect/><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>throw Error: invalid numeric values</p></span></div></foreignObject></g></g><g transform="translate(619.10546875, 1499.234375)" id="flowchart-CheckPositive-10" class="node default"><polygon transform="translate(-91.15625,91.15625)" class="label-container" points="91.15625,0 182.3125,-91.15625 91.15625,-182.3125 0,-91.15625"/><g transform="translate(-52.15625, -24)" style="" class="label"><rect/><foreignObject height="48" width="104.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>All OHLCV &gt; 0?<br />(volume &gt;= 0)</p></span></div></foreignObject></g></g><g transform="translate(467.64453125, 1787.3125)" id="flowchart-ThrowPositiveError-11" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -24)" style="" class="label"><rect/><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>throw Error: zero or negative values</p></span></div></foreignObject></g></g><g transform="translate(770.56640625, 1787.3125)" id="flowchart-CheckAnomaly-12" class="node default"><polygon transform="translate(-122.921875,122.921875)" class="label-container" points="122.921875,0 245.84375,-122.921875 122.921875,-245.84375 0,-122.921875"/><g transform="translate(-95.921875, -12)" style="" class="label"><rect/><foreignObject height="24" width="191.84375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>All OHLC &gt;= minValidPrice?</p></span></div></foreignObject></g></g><g transform="translate(723.140625, 2023.234375)" id="flowchart-ThrowAnomalyError-13" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -24)" style="" class="label"><rect/><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>throw Error: anomalously low price</p></span></div></foreignObject></g></g><g transform="translate(975.9140625, 2023.234375)" id="flowchart-NextCandle-14" class="node default"><rect height="54" width="145.546875" y="-27" x="-72.7734375" style="" class="basic label-container"/><g transform="translate(-42.7734375, -12)" style="" class="label"><rect/><foreignObject height="24" width="85.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Next candle</p></span></div></foreignObject></g></g><g transform="translate(975.9140625, 2163.234375)" id="flowchart-ReturnOK2-15" class="node default"><rect height="54" width="156" y="-27" x="-78" style="" class="basic label-container"/><g transform="translate(-48, -12)" style="" class="label"><rect/><foreignObject height="24" width="96"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>return (valid)</p></span></div></foreignObject></g></g></g></g></g></svg>