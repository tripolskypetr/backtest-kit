<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1039.328125 1120" style="max-width: 1039.33px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph6" class="cluster"><rect height="128" width="313.828125" y="984" x="362.75" style=""/><g transform="translate(476.8203125, 984)" class="cluster-label"><foreignObject height="24" width="85.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Data Source</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph5" class="cluster"><rect height="176" width="330" y="436" x="701.328125" style=""/><g transform="translate(828.765625, 436)" class="cluster-label"><foreignObject height="24" width="75.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Core Logic</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph4" class="cluster"><rect height="200" width="888.328125" y="710" x="70.5" style=""/><g transform="translate(471.25, 710)" class="cluster-label"><foreignObject height="24" width="86.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Client Layer</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph3" class="cluster"><rect height="176" width="330" y="436" x="8" style=""/><g transform="translate(103.4453125, 436)" class="cluster-label"><foreignObject height="24" width="139.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Connection Factory</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph2" class="cluster"><rect height="176" width="323.328125" y="436" x="358" style=""/><g transform="translate(461.890625, 436)" class="cluster-label"><foreignObject height="24" width="115.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Validation Layer</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="152" width="514.4140625" y="210" x="127.04296875" style=""/><g transform="translate(327.4453125, 210)" class="cluster-label"><foreignObject height="24" width="113.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Schema Storage</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="128" width="283.640625" y="8" x="336.1015625" style=""/><g transform="translate(403.40625, 8)" class="cluster-label"><foreignObject height="24" width="149.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>User Registration API</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ADD_EXCH_EXCH_SCHEMA_0" d="M477.922,111L477.922,115.167C477.922,119.333,477.922,127.667,477.922,138C477.922,148.333,477.922,160.667,477.922,173C477.922,185.333,477.922,197.667,477.922,207.333C477.922,217,477.922,224,477.922,227.5L477.922,231"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_EXCH_SCHEMA_EXCH_VAL_0" d="M481.919,337L482.246,341.167C482.573,345.333,483.226,353.667,483.552,364C483.879,374.333,483.879,386.667,483.879,399C483.879,411.333,483.879,423.667,486.135,435.382C488.392,447.098,492.905,458.196,495.162,463.746L497.418,469.295"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_EXCH_VAL_EXCH_SCHEMA_0" d="M540.403,473L542.911,466.833C545.419,460.667,550.434,448.333,552.942,436C555.449,423.667,555.449,411.333,555.449,399C555.449,386.667,555.449,374.333,551.675,364.467C547.901,354.6,540.352,347.2,536.578,343.5L532.803,339.8"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_EXCH_SCHEMA_EXCH_CONN_0" d="M360.906,315.165L329.589,322.971C298.271,330.777,235.635,346.388,204.318,360.361C173,374.333,173,386.667,173,399C173,411.333,173,423.667,173,433.333C173,443,173,450,173,453.5L173,457"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_EXCH_CONN_CLIENT_EXCH_0" d="M173,587L173,591.167C173,595.333,173,603.667,173,616C173,628.333,173,644.667,173,661C173,677.333,173,693.667,208.47,712.065C243.94,730.464,314.881,750.927,350.351,761.159L385.821,771.391"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_EXCH_CORE_CLIENT_EXCH_0" d="M866.328,587L866.328,591.167C866.328,595.333,866.328,603.667,866.328,616C866.328,628.333,866.328,644.667,866.328,661C866.328,677.333,866.328,693.667,830.858,712.065C795.388,730.464,724.448,750.927,688.977,761.159L653.507,771.391"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CLIENT_EXCH_USER_IMPL_0" d="M519.664,885L519.664,889.167C519.664,893.333,519.664,901.667,519.664,912C519.664,922.333,519.664,934.667,519.664,947C519.664,959.333,519.664,971.667,519.664,981.333C519.664,991,519.664,998,519.664,1001.5L519.664,1005"/></g><g class="edgeLabels"><g transform="translate(477.921875, 173)" class="edgeLabel"><g transform="translate(-30.890625, -12)" class="label"><foreignObject height="24" width="61.78125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>registers</p></span></div></foreignObject></g></g><g transform="translate(483.87890625, 399)" class="edgeLabel"><g transform="translate(-19.375, -12)" class="label"><foreignObject height="24" width="38.75"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>reads</p></span></div></foreignObject></g></g><g transform="translate(555.44921875, 399)" class="edgeLabel"><g transform="translate(-32.1953125, -12)" class="label"><foreignObject height="24" width="64.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>validates</p></span></div></foreignObject></g></g><g transform="translate(173, 399)" class="edgeLabel"><g transform="translate(-59.3046875, -12)" class="label"><foreignObject height="24" width="118.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>provides schema</p></span></div></foreignObject></g></g><g transform="translate(173, 661)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>instantiates with IExchangeParams</p></span></div></foreignObject></g></g><g transform="translate(866.328125, 661)" class="edgeLabel"><g transform="translate(-49.0703125, -12)" class="label"><foreignObject height="24" width="98.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>calls methods</p></span></div></foreignObject></g></g><g transform="translate(519.6640625, 947)" class="edgeLabel"><g transform="translate(-75.9453125, -12)" class="label"><foreignObject height="24" width="151.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>invokes user callback</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(477.921875, 72)" id="flowchart-ADD_EXCH-0" class="node default"><rect height="78" width="213.640625" y="-39" x="-106.8203125" style="" class="basic label-container"/><g transform="translate(-76.8203125, -24)" style="" class="label"><rect/><foreignObject height="48" width="153.640625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>addExchange()<br />(src/function/add.ts)</p></span></div></foreignObject></g></g><g transform="translate(477.921875, 286)" id="flowchart-EXCH_SCHEMA-1" class="node default"><rect height="102" width="234.03125" y="-51" x="-117.015625" style="fill:#fff4e1 !important;stroke:#333 !important;stroke-width:2px !important" class="basic label-container"/><g transform="translate(-87.015625, -36)" style="" class="label"><rect/><foreignObject height="72" width="174.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ExchangeSchemaService<br />ToolRegistry pattern<br />stores IExchangeSchema</p></span></div></foreignObject></g></g><g transform="translate(519.6640625, 524)" id="flowchart-EXCH_VAL-2" class="node default"><rect height="102" width="253.328125" y="-51" x="-126.6640625" style="" class="basic label-container"/><g transform="translate(-96.6640625, -36)" style="" class="label"><rect/><foreignObject height="72" width="193.328125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ExchangeValidationService<br />validates schema structure<br />memoized checks</p></span></div></foreignObject></g></g><g transform="translate(173, 524)" id="flowchart-EXCH_CONN-3" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ExchangeConnectionService<br />memoized by exchangeName<br />creates ClientExchange</p></span></div></foreignObject></g></g><g transform="translate(519.6640625, 810)" id="flowchart-CLIENT_EXCH-4" class="node default"><rect height="150" width="260" y="-75" x="-130" style="fill:#e1f5ff !important;stroke:#333 !important;stroke-width:3px !important" class="basic label-container"/><g transform="translate(-100, -60)" style="" class="label"><rect/><foreignObject height="120" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientExchange<br />implements IExchange<br />getCandles, getNextCandles<br />getAveragePrice (VWAP)</p></span></div></foreignObject></g></g><g transform="translate(866.328125, 524)" id="flowchart-EXCH_CORE-5" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ExchangeCoreService<br />orchestrates operations<br />delegates to ClientExchange</p></span></div></foreignObject></g></g><g transform="translate(519.6640625, 1048)" id="flowchart-USER_IMPL-6" class="node default"><rect height="78" width="243.828125" y="-39" x="-121.9140625" style="" class="basic label-container"/><g transform="translate(-91.9140625, -24)" style="" class="label"><rect/><foreignObject height="48" width="183.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>User-provided getCandles<br />CCXT, REST API, Database</p></span></div></foreignObject></g></g></g></g></g></svg>