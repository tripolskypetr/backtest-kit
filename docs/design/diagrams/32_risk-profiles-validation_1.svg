<svg aria-roledescription="stateDiagram" role="graphics-document document" viewBox="0 0 1021.65625 1178" style="max-width: 1021.66px; background-color: white;" class="statediagram" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg defs #statediagram-barbEnd{fill:#333333;stroke:#333333;}#my-svg g.stateGroup text{fill:#9370DB;stroke:none;font-size:10px;}#my-svg g.stateGroup text{fill:#333;stroke:none;font-size:10px;}#my-svg g.stateGroup .state-title{font-weight:bolder;fill:#131300;}#my-svg g.stateGroup rect{fill:#ECECFF;stroke:#9370DB;}#my-svg g.stateGroup line{stroke:#333333;stroke-width:1;}#my-svg .transition{stroke:#333333;stroke-width:1;fill:none;}#my-svg .stateGroup .composit{fill:white;border-bottom:1px;}#my-svg .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#my-svg .state-note{stroke:#aaaa33;fill:#fff5ad;}#my-svg .state-note text{fill:black;stroke:none;font-size:10px;}#my-svg .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#my-svg .edgeLabel .label rect{fill:#ECECFF;opacity:0.5;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .edgeLabel .label text{fill:#333;}#my-svg .label div .edgeLabel{color:#333;}#my-svg .stateLabel text{fill:#131300;font-size:10px;font-weight:bold;}#my-svg .node circle.state-start{fill:#333333;stroke:#333333;}#my-svg .node .fork-join{fill:#333333;stroke:#333333;}#my-svg .node circle.state-end{fill:#9370DB;stroke:white;stroke-width:1.5;}#my-svg .end-state-inner{fill:white;stroke-width:1.5;}#my-svg .node rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .node polygon{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg #statediagram-barbEnd{fill:#333333;}#my-svg .statediagram-cluster rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .cluster-label,#my-svg .nodeLabel{color:#131300;}#my-svg .statediagram-cluster rect.outer{rx:5px;ry:5px;}#my-svg .statediagram-state .divider{stroke:#9370DB;}#my-svg .statediagram-state .title-state{rx:5px;ry:5px;}#my-svg .statediagram-cluster.statediagram-cluster .inner{fill:white;}#my-svg .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f0f0f0;}#my-svg .statediagram-cluster .inner{rx:0;ry:0;}#my-svg .statediagram-state rect.basic{rx:5px;ry:5px;}#my-svg .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#f0f0f0;}#my-svg .note-edge{stroke-dasharray:5;}#my-svg .statediagram-note rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#my-svg .statediagram-note rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#my-svg .statediagram-note text{fill:black;}#my-svg .statediagram-note .nodeLabel{color:black;}#my-svg .statediagram .edgeLabel{color:red;}#my-svg #dependencyStart,#my-svg #dependencyEnd{fill:#333333;stroke:#333333;stroke-width:1;}#my-svg .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><defs><marker orient="auto" markerUnits="userSpaceOnUse" markerHeight="14" markerWidth="20" refY="7" refX="19" id="my-svg_stateDiagram-barbEnd"><path d="M 19,7 L9,13 L14,7 L9,1 Z"/></marker></defs><g class="root"><g class="clusters"><g id="CheckingRisk----parent" class="note-cluster"><rect fill="none" height="200" width="252.515625" y="348" x="254.640625"/></g><g id="Active----parent" class="note-cluster"><rect fill="none" height="176" width="300" y="994" x="713.65625"/></g></g><g class="edgePaths"><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge0" d="M363.629,22L363.629,28.167C363.629,34.333,363.629,46.667,363.629,59C363.629,71.333,363.629,83.667,363.629,89.833L363.629,96"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge1" d="M363.629,136L363.629,142.167C363.629,148.333,363.629,160.667,363.629,173C363.629,185.333,363.629,197.667,363.629,203.833L363.629,210"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge2" d="M313.272,250L292.71,258.167C272.148,266.333,231.023,282.667,210.461,299C189.898,315.333,189.898,331.667,182.713,353.167C175.527,374.667,161.155,401.333,153.969,414.667L146.783,428"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge3" d="M418.027,238.475L482.775,248.563C547.523,258.65,677.02,278.825,741.768,297.079C806.516,315.333,806.516,331.667,806.516,353.167C806.516,374.667,806.516,401.333,806.516,414.667L806.516,428"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge4" d="M806.516,468L806.516,481.333C806.516,494.667,806.516,521.333,806.516,544.833C806.516,568.333,806.516,588.667,806.516,609C806.516,629.333,806.516,649.667,806.516,659.833L806.516,670"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge5" d="M806.516,710L806.516,720.167C806.516,730.333,806.516,750.667,806.516,771C806.516,791.333,806.516,811.667,806.516,821.833L806.516,832"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge6" d="M776.102,870.1L758.486,880.583C740.87,891.066,705.638,912.033,688.022,932.683C670.406,953.333,670.406,973.667,661.049,995.167C651.691,1016.667,632.975,1039.333,623.618,1050.667L614.26,1062"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge7" d="M581.703,1062L572.612,1050.667C563.521,1039.333,545.338,1016.667,536.247,995.167C527.156,973.667,527.156,953.333,527.156,929.667C527.156,906,527.156,879,527.156,852C527.156,825,527.156,798,527.156,771C527.156,744,527.156,717,527.156,690C527.156,663,527.156,636,527.156,612.333C527.156,588.667,527.156,568.333,527.156,541.5C527.156,514.667,527.156,481.333,527.156,448C527.156,414.667,527.156,381.333,527.156,356.5C527.156,331.667,527.156,315.333,527.156,295.667C527.156,276,527.156,253,527.156,232C527.156,211,527.156,192,506.314,175.235C485.473,158.471,443.789,143.941,422.947,136.676L402.105,129.412"/><path marker-end="url(#my-svg_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge8" d="M125.225,428L118.039,414.667C110.853,401.333,96.481,374.667,89.295,353.167C82.109,331.667,82.109,315.333,82.109,295.667C82.109,276,82.109,253,82.109,232C82.109,211,82.109,192,122.617,174.298C163.124,156.597,244.138,140.194,284.645,131.992L325.152,123.79"/><path style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="CheckingRisk-CheckingRisk----note-9" d="M368.635,250L370.679,258.167C372.723,266.333,376.81,282.667,378.854,299C380.898,315.333,380.898,331.667,380.898,344C380.898,356.333,380.898,364.667,380.898,368.833L380.898,373"/><path style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="Active-Active----note-10" d="M820.624,872L827.796,882.167C834.968,892.333,849.312,912.667,856.484,933C863.656,953.333,863.656,973.667,863.656,988C863.656,1002.333,863.656,1010.667,863.656,1014.833L863.656,1019"/></g><g class="edgeLabels"><g transform="translate(363.62890625, 59)" class="edgeLabel"><g transform="translate(-46.6484375, -12)" class="label"><foreignObject height="24" width="93.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"Initial state"</p></span></div></foreignObject></g></g><g transform="translate(363.62890625, 173)" class="edgeLabel"><g transform="translate(-94.7265625, -12)" class="label"><foreignObject height="24" width="189.453125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"getSignal() returns signal"</p></span></div></foreignObject></g></g><g transform="translate(189.8984375, 299)" class="edgeLabel"><g transform="translate(-87.7890625, -24)" class="label"><foreignObject height="48" width="175.578125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"checkSignal() = false<br />(validation threw error)"</p></span></div></foreignObject></g></g><g transform="translate(806.515625, 299)" class="edgeLabel"><g transform="translate(-84.953125, -24)" class="label"><foreignObject height="48" width="169.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"checkSignal() = true<br />(all validations passed)"</p></span></div></foreignObject></g></g><g transform="translate(806.515625, 609)" class="edgeLabel"><g transform="translate(-100, -36)" class="label"><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"Open signal<br />addSignal(symbol, context)"</p></span></div></foreignObject></g></g><g transform="translate(806.515625, 771)" class="edgeLabel"><g transform="translate(-100, -36)" class="label"><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"Position active<br />tracked in RiskGlobalService"</p></span></div></foreignObject></g></g><g transform="translate(670.40625, 933)" class="edgeLabel"><g transform="translate(-100, -36)" class="label"><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"TP/SL/time_expired<br />removeSignal(symbol, context)"</p></span></div></foreignObject></g></g><g transform="translate(527.15625, 609)" class="edgeLabel"><g transform="translate(-81.0390625, -24)" class="label"><foreignObject height="48" width="162.078125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"Position removed<br />from activePositions[]"</p></span></div></foreignObject></g></g><g transform="translate(82.109375, 230)" class="edgeLabel"><g transform="translate(-74.109375, -12)" class="label"><foreignObject height="24" width="148.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>"No position opened"</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(363.62890625, 15)" id="state-root_start-0" class="node default"><circle height="14" width="14" r="7" class="state-start"/></g><g transform="translate(363.62890625, 116)" id="state-NoSignal-8" class="node  statediagram-state"><rect height="40" width="76.953125" y="-20" x="-38.4765625" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-30.4765625, -12)" style="" class="label"><rect/><foreignObject height="24" width="60.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>NoSignal</p></span></div></foreignObject></g></g><g transform="translate(363.62890625, 230)" id="state-CheckingRisk-9" class="node  statediagram-state"><rect height="40" width="108.796875" y="-20" x="-54.3984375" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-46.3984375, -12)" style="" class="label"><rect/><foreignObject height="24" width="92.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CheckingRisk</p></span></div></foreignObject></g></g><g transform="translate(136.00390625, 448)" id="state-Rejected-8" class="node  statediagram-state"><rect height="40" width="79.890625" y="-20" x="-39.9453125" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-31.9453125, -12)" style="" class="label"><rect/><foreignObject height="24" width="63.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Rejected</p></span></div></foreignObject></g></g><g transform="translate(806.515625, 448)" id="state-Approved-4" class="node  statediagram-state"><rect height="40" width="83.546875" y="-20" x="-41.7734375" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-33.7734375, -12)" style="" class="label"><rect/><foreignObject height="24" width="67.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Approved</p></span></div></foreignObject></g></g><g transform="translate(806.515625, 690)" id="state-SignalOpened-5" class="node  statediagram-state"><rect height="40" width="112.96875" y="-20" x="-56.484375" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-48.484375, -12)" style="" class="label"><rect/><foreignObject height="24" width="96.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>SignalOpened</p></span></div></foreignObject></g></g><g transform="translate(806.515625, 852)" id="state-Active-10" class="node  statediagram-state"><rect height="40" width="60.828125" y="-20" x="-30.4140625" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-22.4140625, -12)" style="" class="label"><rect/><foreignObject height="24" width="44.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Active</p></span></div></foreignObject></g></g><g transform="translate(597.74609375, 1082)" id="state-Closed-7" class="node  statediagram-state"><rect height="40" width="63" y="-20" x="-31.5" ry="5" rx="5" style="" class="basic label-container"/><g transform="translate(-23.5, -12)" style="" class="label"><rect/><foreignObject height="24" width="47"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Closed</p></span></div></foreignObject></g></g><g transform="translate(380.8984375, 448)" id="state-CheckingRisk----note-9" class="node statediagram-note"><g class="basic label-container"><path style="" fill="#fff5ad" stroke-width="0" stroke="none" d="M-91.2578125 -75 L91.2578125 -75 L91.2578125 75 L-91.2578125 75"/><path style="" fill="none" stroke-width="1.3" stroke="#aaaa33" d="M-91.2578125 -75 C-25.085204717283688 -75, 41.087403065432625 -75, 91.2578125 -75 M-91.2578125 -75 C-45.83975122054599 -75, -0.42168994109198366 -75, 91.2578125 -75 M91.2578125 -75 C91.2578125 -16.44702817435664, 91.2578125 42.10594365128672, 91.2578125 75 M91.2578125 -75 C91.2578125 -36.97712145028891, 91.2578125 1.0457570994221754, 91.2578125 75 M91.2578125 75 C19.473212153201644 75, -52.31138819359671 75, -91.2578125 75 M91.2578125 75 C36.691670482371414 75, -17.87447153525717 75, -91.2578125 75 M-91.2578125 75 C-91.2578125 43.08762446058945, -91.2578125 11.175248921178898, -91.2578125 -75 M-91.2578125 75 C-91.2578125 36.88516519353414, -91.2578125 -1.2296696129317155, -91.2578125 -75"/></g><g transform="translate(-76.2578125, -60)" style="" class="label"><rect/><foreignObject height="120" width="152.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Validations see:<br />- activePositionCount<br />- activePositions[]<br />- pendingSignal<br />- currentPrice</p></span></div></foreignObject></g></g><g transform="translate(863.65625, 1082)" id="state-Active----note-10" class="node statediagram-note"><g class="basic label-container"><path style="" fill="#fff5ad" stroke-width="0" stroke="none" d="M-115 -63 L115 -63 L115 63 L-115 63"/><path style="" fill="none" stroke-width="1.3" stroke="#aaaa33" d="M-115 -63 C-51.72944839220777 -63, 11.541103215584457 -63, 115 -63 M-115 -63 C-44.694752962097056 -63, 25.61049407580589 -63, 115 -63 M115 -63 C115 -25.782729110443512, 115 11.434541779112976, 115 63 M115 -63 C115 -14.674985005822897, 115 33.650029988354206, 115 63 M115 63 C43.80644129489647 63, -27.387117410207054 63, -115 63 M115 63 C47.37031486055086 63, -20.259370278898274 63, -115 63 M-115 63 C-115 23.559473670885538, -115 -15.881052658228924, -115 -63 M-115 63 C-115 16.863568262362755, -115 -29.27286347527449, -115 -63"/></g><g transform="translate(-100, -48)" style="" class="label"><rect/><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Other strategies' checkSignal()<br />calls see this position in<br />activePositions[]</p></span></div></foreignObject></g></g></g></g></g></svg>